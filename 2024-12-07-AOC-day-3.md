---
article_html: "<p>Inspired by Shradha Agarwal’s post on Byte Size Go :<a href=\"https://www.bytesizego.com/blog/aoc-day3-golang\">here</a>:
  I decided to write about my approach to this, it’s different, and would like to
  share it. That post was well written and the solution was compact and simple, I
  recommend reading that first as well.</p>\n<p>That is a blogvent series, I would
  also love to take part in blogvent but can't be sure I'll be completing this.</p>\n<h2>Introduction</h2>\n<p>Well,
  it is day 3 of the advent of code 2024, and I have been doing it on live streams.
  I am behind two days but working through them one by one. So far, I have learned
  a lot of things in Go. Let’s dive in for the day 3.</p>\n<h2>Part 1</h2>\n<p>Part
  one to any AOC problem seems straightforward, but as soon as part two is revealed,
  the real implementation starts to break the sweat (if you weren’t optimistic or
  thoughtful)</p>\n<p>For part 1 for this day, was to parse a string that contained
  <code>mul(X,Y</code>) an expression, where X could be any 3-digit number. So, there
  could be multiple such expressions within the string and the purpose was to multiply
  the X and Y in the individual expression and add them up.</p>\n<p><img src=\"https://meetgor-cdn.pages.dev/aoc-2024-d3-solution-part1.jpg\"
  alt=\"AOC Day 3 Part 1\" /></p>\n<pre class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button
  class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>plaintext</div>\n<div class=\"highlight\"><pre><span></span>xmul(2,4)&amp;mul[3,7]!^don&#39;t()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))\n</pre></div>\n\n</pre>\n\n<p>In
  this example above there are 4 such expressions, and if we add the multiplications
  of those, we get the answer as 161.</p>\n<h3>Approach</h3>\n<p>It looks like a Regex
  pattern, finding an expression-like pattern in a string. So, the approach would
  be to find such expressions with a regex pattern and parse the numbers to integers,
  and multiply them, simply.</p>\n<p>You could go ahead and write the parser for iterating
  over each character in the string and parsing the tokens, then evaluating the expression.
  That is a valid approach, but I choose to do this because I don’t know how to write
  a parser honestly, I want to try that solution at the end as well.</p>\n<p>But for
  the first part, a quick regular expression seems a good idea.</p>\n<h3>Constructing
  the Regular Expression</h3>\n<p>The first thing is to write the regular expression
  for the <code>mul(X,Y)</code> part which is the only challenging section in part
  one. The rest is just simple math.</p>\n<p>So, we need to find <code>mul</code>,
  then a <code>(</code> then any number which is 1 to 3 digits long, then <code>,</code>
  and again a number that is 1 to 3 digits long, and finally ends with a <code>)</code></p>\n<p>That
  translates to:</p>\n<pre class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button
  class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>plaintext</div>\n<div class=\"highlight\"><pre><span></span>mul\\((\\d{1,3}),(\\d{1,3})\\)
  \n</pre></div>\n\n</pre>\n\n<p>Let’s breakdown:</p>\n<ul>\n<li>\n<p><code>mul</code>
  for capturing the literal word <code>mul</code></p>\n</li>\n<li>\n<p><code>\\(</code>
  this is for the first parenthesis in the expression <code>mul()</code> , we need
  to escape the bracket in a regular expression if we want to match it, so we use
  <code>\\</code> before it.</p>\n</li>\n<li>\n<p>Then we have a match group <code>(\\d{1,3})</code>
  , this will be the <code>X</code> in <code>mul(X,Y)</code>:</p>\n<ul>\n<li>\n<p>A
  match group is like a group of a match in a regex, basically, if you want to capture
  specific parts in the entire match, then we use <code>()</code> to group them individually,
  this is not necessary but helps in getting the right things without overhead</p>\n</li>\n<li>\n<p>In
  this case, we are using a match group for capturing a number which can have 1 to
  3 digits.</p>\n</li>\n<li>\n<p>The other way to write this is <code>([0-9]{1,3})</code>
  , which also would do the same thing, (NOTE: there are some differences in <code>[0-9]</code>
  and <code>\\d</code>, but that is very subtle and won’t affect this puzzle, if you
  are still curious, I prefer reading this <a href=\"https://unix.stackexchange.com/questions/414226/difference-between-0-9-digit-and-d\">StackOverflow
  question</a>)</p>\n</li>\n</ul>\n</li>\n<li>\n<p>We then use <code>,</code> for
  the separator of <code>X</code> and <code>Y</code> operands in the <code>mul(X,Y)</code>
  expression</p>\n</li>\n<li>\n<p>We then similarly do the match for <code>Y</code>
  in <code>mul(X,Y)</code> with the <code>(\\d{1,3})</code> match group</p>\n</li>\n<li>\n<p>Finally,
  we end the regular expression with the <code>)</code> to end the expression</p>\n</li>\n</ul>\n<h3>Code
  it</h3>\n<p>This is quite straightforward, we grab the line as a string and use
  <a href=\"https://pkg.go.dev/regexp#MustCompile\">regexp.MustCompile</a> function
  which gives us a <a href=\"https://pkg.go.dev/regexp#Regexp\">Regexp</a> object,
  that in turn has a few methods associated with it to find, match, replace, and other
  things that can be done with a regular expression on a string.</p>\n<p>Once we have
  the <code>mulRegex</code> , we can use the <a href=\"https://pkg.go.dev/regexp#Regexp.FindAllStringSubmatch\">FindAllStringSubmatch</a>
  method associated with the <code>Regexp</code> struct in the <code>regexp</code>
  package. The function takes in a string to perform the regex on, and the maximum
  number of matches to return. We want all the results, so we pass them in <code>-1</code>
  to get all the matches.</p>\n<p>Now, this method returns a slice of a slice of strings,
  each slice is a match, and within each slice, there is a slice of string, with the
  matched string and the subsequent match groups in the string if any.</p>\n<pre class='wrapper'>\n\n<div
  class='copy-wrapper'>\n\n<button class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"kd\">func</span><span class=\"w\"> </span><span class=\"nx\">FindMulExpression</span><span
  class=\"p\">(</span><span class=\"nx\">line</span><span class=\"w\"> </span><span
  class=\"kt\">string</span><span class=\"p\">)</span><span class=\"w\"> </span><span
  class=\"p\">[][]</span><span class=\"kt\">string</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span
  class=\"nx\">mulRegex</span><span class=\"w\"> </span><span class=\"o\">:=</span><span
  class=\"w\"> </span><span class=\"nx\">regexp</span><span class=\"p\">.</span><span
  class=\"nx\">MustCompile</span><span class=\"p\">(</span><span class=\"s\">`mul\\((\\d{1,3}),(\\d{1,3})\\)`</span><span
  class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span
  class=\"k\">return</span><span class=\"w\"> </span><span class=\"nx\">mulRegex</span><span
  class=\"p\">.</span><span class=\"nx\">FindAllStringSubmatch</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">,</span><span class=\"w\"> </span><span
  class=\"nb\">len</span><span class=\"p\">(</span><span class=\"nx\">line</span><span
  class=\"p\">))</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span
  class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>So, the above function will return
  something like this</p>\n<pre class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button
  class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span
  class=\"p\">[</span><span class=\"nx\">mul</span><span class=\"p\">(</span><span
  class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">4</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\">
  </span><span class=\"mi\">4</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">[</span><span class=\"nx\">mul</span><span
  class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">5</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\">
  </span><span class=\"mi\">5</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">[</span><span class=\"nx\">mul</span><span
  class=\"p\">(</span><span class=\"mi\">11</span><span class=\"p\">,</span><span
  class=\"mi\">8</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">11</span><span
  class=\"w\"> </span><span class=\"mi\">8</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">[</span><span class=\"nx\">mul</span><span
  class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">5</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\">
  </span><span class=\"mi\">5</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"p\">]</span><span class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>This
  is a list of list of strings, these look like numbers but those are string types
  in Golang.</p>\n<p>Now we have this, we can create the actual logic part of obtaining
  the result, which is to parse these expressions, multiply <code>X</code> and <code>Y</code>
  and add the results for each of the expressions.</p>\n<pre class='wrapper'>\n\n<div
  class='copy-wrapper'>\n\n<button class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"kd\">func</span><span class=\"w\"> </span><span class=\"nx\">Multiply</span><span
  class=\"p\">(</span><span class=\"nx\">matches</span><span class=\"w\"> </span><span
  class=\"p\">[][]</span><span class=\"kt\">string</span><span class=\"p\">)</span><span
  class=\"w\"> </span><span class=\"kt\">int</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t</span><span
  class=\"nx\">score</span><span class=\"w\"> </span><span class=\"o\">:=</span><span
  class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"></span>\n<span
  class=\"w\">\t</span><span class=\"k\">for</span><span class=\"w\"> </span><span
  class=\"nx\">_</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">match</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">range</span><span
  class=\"w\"> </span><span class=\"nx\">matches</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"nx\">x</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">err</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strconv</span><span
  class=\"p\">.</span><span class=\"nx\">Atoi</span><span class=\"p\">(</span><span
  class=\"nb\">string</span><span class=\"p\">(</span><span class=\"nx\">match</span><span
  class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]))</span><span
  class=\"w\"></span>\n<span class=\"w\">\t\t</span><span class=\"k\">if</span><span
  class=\"w\"> </span><span class=\"nx\">err</span><span class=\"w\"> </span><span
  class=\"o\">!=</span><span class=\"w\"> </span><span class=\"kc\">nil</span><span
  class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t\t\t</span><span
  class=\"nb\">panic</span><span class=\"p\">(</span><span class=\"nx\">err</span><span
  class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"nx\">y</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">err</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strconv</span><span
  class=\"p\">.</span><span class=\"nx\">Atoi</span><span class=\"p\">(</span><span
  class=\"nb\">string</span><span class=\"p\">(</span><span class=\"nx\">match</span><span
  class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]))</span><span
  class=\"w\"></span>\n<span class=\"w\">\t\t</span><span class=\"k\">if</span><span
  class=\"w\"> </span><span class=\"nx\">err</span><span class=\"w\"> </span><span
  class=\"o\">!=</span><span class=\"w\"> </span><span class=\"kc\">nil</span><span
  class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t\t\t</span><span
  class=\"nb\">panic</span><span class=\"p\">(</span><span class=\"nx\">err</span><span
  class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"nx\">score</span><span class=\"w\"> </span><span class=\"o\">+=</span><span
  class=\"w\"> </span><span class=\"nx\">x</span><span class=\"w\"> </span><span class=\"o\">*</span><span
  class=\"w\"> </span><span class=\"nx\">y</span><span class=\"w\"></span>\n<span
  class=\"w\">\t</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span
  class=\"w\">\t</span><span class=\"k\">return</span><span class=\"w\"> </span><span
  class=\"nx\">score</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span
  class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>This is pretty straightforward,
  we iterate over each of the matches, that is one <code>mul(X,Y)</code> expression
  and parse the <code>X</code> and <code>Y</code> each into integers and multiply
  them, the result obtained is then added to the score. We do this for each <code>mul(X,Y)</code>
  expression that is found in the string(line) and return the final score.</p>\n<h3>Input</h3>\n<p>Now,
  the example gave us a single string, but I realized there were six lines in the
  input (individual input), so we needed to parse each line and add up the score.</p>\n<p>Remember
  this as it will be critical in part 2, it took me some time and questioning my existence
  to realize we need to combine all the lines to get the result (not necessary in
  part 1 but for sure in part 2).</p>\n<h2>Part 2</h2>\n<p>This is where things go
  wrong usually. At least for me, it did.</p>\n<p>I started with a very naive approach,
  with a forever loop and finding the index of do or don’t and stripping off those
  sections, and then looping until we have no do and don’ts left. That was working
  for the test case but failed on the actual input.</p>\n<p>The approach I finally
  came up and was working by tweaking the same approach slightly.</p>\n<h3>Approach</h3>\n<p>What
  I came up with is to find the first match location of <code>don’()</code> and <code>do()</code>
  strings in the entire string, we take that and remove the parts after <code>don’t()</code>
  or before <code>do()</code> . That way we can trim down the string to only valid/enabled
  <code>mul()</code>expressions.</p>\n<p><img src=\"https://meetgor-cdn.pages.dev/aoc-2024-d3-solution-part2.jpg\"
  alt=\"AOC Day 3 Part 2\" /></p>\n<p>So, the approach more clearly defined will be:</p>\n<ul>\n<li>\n<p>Find
  the location (index) of the <code>don’t()</code> and <code>do()</code> expressions</p>\n</li>\n<li>\n<p>We
  need to keep track of whether the previous string was enabled or disabled so will
  keep a flag to append the enabled expressions (part of the string) to the final
  result</p>\n</li>\n<li>\n<p>If none of them are found, return the string(line) as
  it is</p>\n</li>\n<li>\n<p>If we found either of them then:</p>\n<ul>\n<li>\n<p>If
  we find don’t first (<code>don’t()</code> appears before <code>do()</code>)</p>\n<ul>\n<li>\n<p>If
  the enabled flag is true → append the string before the <code>don’t()</code> expression</p>\n</li>\n<li>\n<p>Then
  toggle the enabled as false and trim off the <code>don’t()</code> part<br />\n(This
  way we have completed checking everything before the don’t expression, so we remove
  that part from the line string)</p>\n</li>\n</ul>\n</li>\n<li>\n<p>If we find do
  first (<code>do()</code> appears before <code>don’t()</code>)</p>\n<ul>\n<li>\n<p>If
  the enabled flag is true → append the string before the <code>do()</code> expression</p>\n</li>\n<li>\n<p>Then
  toggle the enabled as true and trim off the <code>do()</code> part<br />\n(This
  way we have completed checking everything before the do expression, so we remove
  the part from the line string)</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>We
  do this until there is no line string left to be checked</p>\n</li>\n</ul>\n<h3>Code</h3>\n<p>I
  used simple Strings.Index to get the first match index for the substring, In this
  case, I want the first matching index for <code>don’t()</code> and <code>do()</code>
  . Once we have the indices of both the matches, we can iterate over till we are
  not left with any do or don’ts in the string.</p>\n<p>If we have either do or don’t
  we append to the string the part before don’t if enabled or part before do if enabled
  and toggle on and off the enabled flag accordingly. By the end of the loop, the
  result string will have only the enabled parts of the line/string.</p>\n<pre class='wrapper'>\n\n<div
  class='copy-wrapper'>\n\n<button class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"kd\">func</span><span class=\"w\"> </span><span class=\"nx\">StripDoDont</span><span
  class=\"p\">(</span><span class=\"nx\">line</span><span class=\"w\"> </span><span
  class=\"kt\">string</span><span class=\"p\">)</span><span class=\"w\"> </span><span
  class=\"kt\">string</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">result</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">enabled</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kc\">true</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">dontOffset</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nb\">len</span><span
  class=\"p\">(</span><span class=\"s\">&quot;don&#39;t()&quot;</span><span class=\"p\">)</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">doOffset</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nb\">len</span><span
  class=\"p\">(</span><span class=\"s\">&quot;do()&quot;</span><span class=\"p\">)</span><span
  class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"k\">for</span><span
  class=\"w\"> </span><span class=\"nb\">len</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">)</span><span class=\"w\"> </span><span
  class=\"p\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span
  class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">
  \       </span><span class=\"nx\">dontIndex</span><span class=\"w\"> </span><span
  class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strings</span><span
  class=\"p\">.</span><span class=\"nx\">Index</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">,</span><span class=\"w\"> </span><span
  class=\"s\">&quot;don&#39;t()&quot;</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span
  class=\"w\">        </span><span class=\"nx\">doIndex</span><span class=\"w\"> </span><span
  class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strings</span><span
  class=\"p\">.</span><span class=\"nx\">Index</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">,</span><span class=\"w\"> </span><span
  class=\"s\">&quot;do()&quot;</span><span class=\"p\">)</span><span class=\"w\"></span>\n\n<span
  class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span
  class=\"nx\">dontIndex</span><span class=\"w\"> </span><span class=\"o\">==</span><span
  class=\"w\"> </span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"w\">
  </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"nx\">doIndex</span><span
  class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"o\">-</span><span
  class=\"mi\">1</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span
  class=\"nx\">enabled</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nx\">result</span><span
  class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">}</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"k\">break</span><span
  class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span
  class=\"w\"></span>\n<span class=\"w\">        </span>\n<span class=\"w\">        </span><span
  class=\"k\">if</span><span class=\"w\"> </span><span class=\"nx\">dontIndex</span><span
  class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"o\">-</span><span
  class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span
  class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">doIndex</span><span
  class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"o\">-</span><span
  class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">||</span><span
  class=\"w\"> </span><span class=\"nx\">dontIndex</span><span class=\"w\"> </span><span
  class=\"p\">&lt;</span><span class=\"w\"> </span><span class=\"nx\">doIndex</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span
  class=\"nx\">enabled</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nx\">result</span><span
  class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"p\">[:</span><span class=\"nx\">dontIndex</span><span class=\"p\">]</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">}</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nx\">enabled</span><span
  class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"kc\">false</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nx\">line</span><span
  class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"p\">[</span><span class=\"nx\">dontIndex</span><span class=\"o\">+</span><span
  class=\"nx\">dontOffset</span><span class=\"p\">:]</span><span class=\"w\"></span>\n<span
  class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"> </span><span
  class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"k\">if</span><span
  class=\"w\"> </span><span class=\"nx\">enabled</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span
  class=\"nx\">result</span><span class=\"w\"> </span><span class=\"o\">+=</span><span
  class=\"w\"> </span><span class=\"nx\">line</span><span class=\"p\">[:</span><span
  class=\"nx\">doIndex</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"nx\">enabled</span><span class=\"w\">
  </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"kc\">true</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nx\">line</span><span
  class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"p\">[</span><span class=\"nx\">doIndex</span><span class=\"o\">+</span><span
  class=\"nx\">doOffset</span><span class=\"p\">:]</span><span class=\"w\"></span>\n<span
  class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n\n<span
  class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span
  class=\"nx\">result</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span
  class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>I take this function and pass
  it to the multiply function where I get the matching patterns for the <code>mul</code>
  expression and do the math.</p>\n<p>The <a href=\"https://pkg.go.dev/strings#Index\">strings.Index</a>
  method takes in a string and a substring to find within that string and returns
  the index of the first occurring instance of that substring. With that we can identify
  if the line string contains the <code>do()</code> or <code>don’t()</code> expressions,
  if they don’t we simply return the line and if there are instances of them, we loop
  and trim the string before and after the expressions depending on whether the flag
  is enabled or disabled.</p>\n<p>Let’s take an example and walk through the logic:</p>\n<pre
  class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button class='copy' title='copy
  code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>plaintext</div>\n<div class=\"highlight\"><pre><span></span>abcxmul(1,3)don&#39;t()mul(9,
  7)do()mul(1,2)don&#39;t()mul(8,7)\n\nenabled = True\nresult = &quot;&quot;\nline
  = &quot;abcxmul(1,3)don&#39;t()mul(9, 7)do()mul(1,2)don&#39;t()mul(8,7)&quot;\n---\nAfter
  Iteration 1:\n    result -&gt; abcxmul(1,3)\n    line -&gt; mul(9, 7)do()mul(1,2)don&#39;t()mul(8,7)\n
  \   enabled = False\n---\nAfter Iteration 2:\n    result -&gt; abcxmul(1,3)\n    line
  -&gt; mul(1,2)don&#39;t()mul(8,7)\n    enabled = True\n---\nAfter Iteration 3:\n
  \   result -&gt; abcxmul(1,3)mul(1,2)\n    line -&gt; mul(8,7)\n    enabled -&gt;
  False\n---\nAfter Iteration 4:\n    No do and don&#39;t found\n    result -&gt;
  abcxmul(1,3)mul(1,2)\n    break out of loop\n---\n\nResult -&gt; abcxmul(1,3)mul(1,2)\n</pre></div>\n\n</pre>\n\n<p>We
  process the result with the same <code>Multiply</code> function that we used in
  the first part after passing it through the <code>FindMulExpression</code> function
  that will return all the mul expressions in the result line string.</p>\n<h3>Heads
  up with the input</h3>\n<p>The actual input of the puzzle is I think multiple lines,
  so we need to preserve this state of the line in all the remaining lines. OR, we
  could be smarter and create a single large string and process that. Both are valid
  and would give the same results. I just didn’t like to add an overhead of keeping
  track of all the states and line, so I just concatenated all the lines and processed
  that single string.</p>\n<h2>Conclusion</h2>\n<p>This was a simple problem in essence
  but if you are not aware of regex you could go down a rabbit hole of writing your
  own parser or wired string manipulation (just like I did).</p>\n<p>That’s it form
  day 3, I will be doing more live stream solving over the weekend and may be the
  next week as well. Find the code for my AoC solutions here on GitHub.</p>\n<p>Till
  then,</p>\n<p>Happy Coding :)</p>\n"
cover: ''
date: 2024-12-07
datetime: 2024-12-07 00:00:00+00:00
description: Solving day 3 of Advent of Code 2024 in Golang. Diving into one of the
  possible approaches to the puzzle.
edit_link: https://github.com/mr-destructive/meetgor.com/edit/gh-pages/blog/posts/2024-12-07-AOC-day-3.md
html: "<p>Inspired by Shradha Agarwal’s post on Byte Size Go :<a href=\"https://www.bytesizego.com/blog/aoc-day3-golang\">here</a>:
  I decided to write about my approach to this, it’s different, and would like to
  share it. That post was well written and the solution was compact and simple, I
  recommend reading that first as well.</p>\n<p>That is a blogvent series, I would
  also love to take part in blogvent but can't be sure I'll be completing this.</p>\n<h2>Introduction</h2>\n<p>Well,
  it is day 3 of the advent of code 2024, and I have been doing it on live streams.
  I am behind two days but working through them one by one. So far, I have learned
  a lot of things in Go. Let’s dive in for the day 3.</p>\n<h2>Part 1</h2>\n<p>Part
  one to any AOC problem seems straightforward, but as soon as part two is revealed,
  the real implementation starts to break the sweat (if you weren’t optimistic or
  thoughtful)</p>\n<p>For part 1 for this day, was to parse a string that contained
  <code>mul(X,Y</code>) an expression, where X could be any 3-digit number. So, there
  could be multiple such expressions within the string and the purpose was to multiply
  the X and Y in the individual expression and add them up.</p>\n<p><img src=\"https://meetgor-cdn.pages.dev/aoc-2024-d3-solution-part1.jpg\"
  alt=\"AOC Day 3 Part 1\" /></p>\n<pre class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button
  class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>plaintext</div>\n<div class=\"highlight\"><pre><span></span>xmul(2,4)&amp;mul[3,7]!^don&#39;t()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))\n</pre></div>\n\n</pre>\n\n<p>In
  this example above there are 4 such expressions, and if we add the multiplications
  of those, we get the answer as 161.</p>\n<h3>Approach</h3>\n<p>It looks like a Regex
  pattern, finding an expression-like pattern in a string. So, the approach would
  be to find such expressions with a regex pattern and parse the numbers to integers,
  and multiply them, simply.</p>\n<p>You could go ahead and write the parser for iterating
  over each character in the string and parsing the tokens, then evaluating the expression.
  That is a valid approach, but I choose to do this because I don’t know how to write
  a parser honestly, I want to try that solution at the end as well.</p>\n<p>But for
  the first part, a quick regular expression seems a good idea.</p>\n<h3>Constructing
  the Regular Expression</h3>\n<p>The first thing is to write the regular expression
  for the <code>mul(X,Y)</code> part which is the only challenging section in part
  one. The rest is just simple math.</p>\n<p>So, we need to find <code>mul</code>,
  then a <code>(</code> then any number which is 1 to 3 digits long, then <code>,</code>
  and again a number that is 1 to 3 digits long, and finally ends with a <code>)</code></p>\n<p>That
  translates to:</p>\n<pre class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button
  class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>plaintext</div>\n<div class=\"highlight\"><pre><span></span>mul\\((\\d{1,3}),(\\d{1,3})\\)
  \n</pre></div>\n\n</pre>\n\n<p>Let’s breakdown:</p>\n<ul>\n<li>\n<p><code>mul</code>
  for capturing the literal word <code>mul</code></p>\n</li>\n<li>\n<p><code>\\(</code>
  this is for the first parenthesis in the expression <code>mul()</code> , we need
  to escape the bracket in a regular expression if we want to match it, so we use
  <code>\\</code> before it.</p>\n</li>\n<li>\n<p>Then we have a match group <code>(\\d{1,3})</code>
  , this will be the <code>X</code> in <code>mul(X,Y)</code>:</p>\n<ul>\n<li>\n<p>A
  match group is like a group of a match in a regex, basically, if you want to capture
  specific parts in the entire match, then we use <code>()</code> to group them individually,
  this is not necessary but helps in getting the right things without overhead</p>\n</li>\n<li>\n<p>In
  this case, we are using a match group for capturing a number which can have 1 to
  3 digits.</p>\n</li>\n<li>\n<p>The other way to write this is <code>([0-9]{1,3})</code>
  , which also would do the same thing, (NOTE: there are some differences in <code>[0-9]</code>
  and <code>\\d</code>, but that is very subtle and won’t affect this puzzle, if you
  are still curious, I prefer reading this <a href=\"https://unix.stackexchange.com/questions/414226/difference-between-0-9-digit-and-d\">StackOverflow
  question</a>)</p>\n</li>\n</ul>\n</li>\n<li>\n<p>We then use <code>,</code> for
  the separator of <code>X</code> and <code>Y</code> operands in the <code>mul(X,Y)</code>
  expression</p>\n</li>\n<li>\n<p>We then similarly do the match for <code>Y</code>
  in <code>mul(X,Y)</code> with the <code>(\\d{1,3})</code> match group</p>\n</li>\n<li>\n<p>Finally,
  we end the regular expression with the <code>)</code> to end the expression</p>\n</li>\n</ul>\n<h3>Code
  it</h3>\n<p>This is quite straightforward, we grab the line as a string and use
  <a href=\"https://pkg.go.dev/regexp#MustCompile\">regexp.MustCompile</a> function
  which gives us a <a href=\"https://pkg.go.dev/regexp#Regexp\">Regexp</a> object,
  that in turn has a few methods associated with it to find, match, replace, and other
  things that can be done with a regular expression on a string.</p>\n<p>Once we have
  the <code>mulRegex</code> , we can use the <a href=\"https://pkg.go.dev/regexp#Regexp.FindAllStringSubmatch\">FindAllStringSubmatch</a>
  method associated with the <code>Regexp</code> struct in the <code>regexp</code>
  package. The function takes in a string to perform the regex on, and the maximum
  number of matches to return. We want all the results, so we pass them in <code>-1</code>
  to get all the matches.</p>\n<p>Now, this method returns a slice of a slice of strings,
  each slice is a match, and within each slice, there is a slice of string, with the
  matched string and the subsequent match groups in the string if any.</p>\n<pre class='wrapper'>\n\n<div
  class='copy-wrapper'>\n\n<button class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"kd\">func</span><span class=\"w\"> </span><span class=\"nx\">FindMulExpression</span><span
  class=\"p\">(</span><span class=\"nx\">line</span><span class=\"w\"> </span><span
  class=\"kt\">string</span><span class=\"p\">)</span><span class=\"w\"> </span><span
  class=\"p\">[][]</span><span class=\"kt\">string</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span
  class=\"nx\">mulRegex</span><span class=\"w\"> </span><span class=\"o\">:=</span><span
  class=\"w\"> </span><span class=\"nx\">regexp</span><span class=\"p\">.</span><span
  class=\"nx\">MustCompile</span><span class=\"p\">(</span><span class=\"s\">`mul\\((\\d{1,3}),(\\d{1,3})\\)`</span><span
  class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span
  class=\"k\">return</span><span class=\"w\"> </span><span class=\"nx\">mulRegex</span><span
  class=\"p\">.</span><span class=\"nx\">FindAllStringSubmatch</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">,</span><span class=\"w\"> </span><span
  class=\"nb\">len</span><span class=\"p\">(</span><span class=\"nx\">line</span><span
  class=\"p\">))</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span
  class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>So, the above function will return
  something like this</p>\n<pre class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button
  class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span
  class=\"p\">[</span><span class=\"nx\">mul</span><span class=\"p\">(</span><span
  class=\"mi\">2</span><span class=\"p\">,</span><span class=\"mi\">4</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\">
  </span><span class=\"mi\">4</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">[</span><span class=\"nx\">mul</span><span
  class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">,</span><span class=\"mi\">5</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\">
  </span><span class=\"mi\">5</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">[</span><span class=\"nx\">mul</span><span
  class=\"p\">(</span><span class=\"mi\">11</span><span class=\"p\">,</span><span
  class=\"mi\">8</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">11</span><span
  class=\"w\"> </span><span class=\"mi\">8</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">[</span><span class=\"nx\">mul</span><span
  class=\"p\">(</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"mi\">5</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\">
  </span><span class=\"mi\">5</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"p\">]</span><span class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>This
  is a list of list of strings, these look like numbers but those are string types
  in Golang.</p>\n<p>Now we have this, we can create the actual logic part of obtaining
  the result, which is to parse these expressions, multiply <code>X</code> and <code>Y</code>
  and add the results for each of the expressions.</p>\n<pre class='wrapper'>\n\n<div
  class='copy-wrapper'>\n\n<button class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"kd\">func</span><span class=\"w\"> </span><span class=\"nx\">Multiply</span><span
  class=\"p\">(</span><span class=\"nx\">matches</span><span class=\"w\"> </span><span
  class=\"p\">[][]</span><span class=\"kt\">string</span><span class=\"p\">)</span><span
  class=\"w\"> </span><span class=\"kt\">int</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t</span><span
  class=\"nx\">score</span><span class=\"w\"> </span><span class=\"o\">:=</span><span
  class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"></span>\n<span
  class=\"w\">\t</span><span class=\"k\">for</span><span class=\"w\"> </span><span
  class=\"nx\">_</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">match</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">range</span><span
  class=\"w\"> </span><span class=\"nx\">matches</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"nx\">x</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">err</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strconv</span><span
  class=\"p\">.</span><span class=\"nx\">Atoi</span><span class=\"p\">(</span><span
  class=\"nb\">string</span><span class=\"p\">(</span><span class=\"nx\">match</span><span
  class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]))</span><span
  class=\"w\"></span>\n<span class=\"w\">\t\t</span><span class=\"k\">if</span><span
  class=\"w\"> </span><span class=\"nx\">err</span><span class=\"w\"> </span><span
  class=\"o\">!=</span><span class=\"w\"> </span><span class=\"kc\">nil</span><span
  class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t\t\t</span><span
  class=\"nb\">panic</span><span class=\"p\">(</span><span class=\"nx\">err</span><span
  class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"nx\">y</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">err</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strconv</span><span
  class=\"p\">.</span><span class=\"nx\">Atoi</span><span class=\"p\">(</span><span
  class=\"nb\">string</span><span class=\"p\">(</span><span class=\"nx\">match</span><span
  class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]))</span><span
  class=\"w\"></span>\n<span class=\"w\">\t\t</span><span class=\"k\">if</span><span
  class=\"w\"> </span><span class=\"nx\">err</span><span class=\"w\"> </span><span
  class=\"o\">!=</span><span class=\"w\"> </span><span class=\"kc\">nil</span><span
  class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">\t\t\t</span><span
  class=\"nb\">panic</span><span class=\"p\">(</span><span class=\"nx\">err</span><span
  class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">\t\t</span><span
  class=\"nx\">score</span><span class=\"w\"> </span><span class=\"o\">+=</span><span
  class=\"w\"> </span><span class=\"nx\">x</span><span class=\"w\"> </span><span class=\"o\">*</span><span
  class=\"w\"> </span><span class=\"nx\">y</span><span class=\"w\"></span>\n<span
  class=\"w\">\t</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span
  class=\"w\">\t</span><span class=\"k\">return</span><span class=\"w\"> </span><span
  class=\"nx\">score</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span
  class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>This is pretty straightforward,
  we iterate over each of the matches, that is one <code>mul(X,Y)</code> expression
  and parse the <code>X</code> and <code>Y</code> each into integers and multiply
  them, the result obtained is then added to the score. We do this for each <code>mul(X,Y)</code>
  expression that is found in the string(line) and return the final score.</p>\n<h3>Input</h3>\n<p>Now,
  the example gave us a single string, but I realized there were six lines in the
  input (individual input), so we needed to parse each line and add up the score.</p>\n<p>Remember
  this as it will be critical in part 2, it took me some time and questioning my existence
  to realize we need to combine all the lines to get the result (not necessary in
  part 1 but for sure in part 2).</p>\n<h2>Part 2</h2>\n<p>This is where things go
  wrong usually. At least for me, it did.</p>\n<p>I started with a very naive approach,
  with a forever loop and finding the index of do or don’t and stripping off those
  sections, and then looping until we have no do and don’ts left. That was working
  for the test case but failed on the actual input.</p>\n<p>The approach I finally
  came up and was working by tweaking the same approach slightly.</p>\n<h3>Approach</h3>\n<p>What
  I came up with is to find the first match location of <code>don’()</code> and <code>do()</code>
  strings in the entire string, we take that and remove the parts after <code>don’t()</code>
  or before <code>do()</code> . That way we can trim down the string to only valid/enabled
  <code>mul()</code>expressions.</p>\n<p><img src=\"https://meetgor-cdn.pages.dev/aoc-2024-d3-solution-part2.jpg\"
  alt=\"AOC Day 3 Part 2\" /></p>\n<p>So, the approach more clearly defined will be:</p>\n<ul>\n<li>\n<p>Find
  the location (index) of the <code>don’t()</code> and <code>do()</code> expressions</p>\n</li>\n<li>\n<p>We
  need to keep track of whether the previous string was enabled or disabled so will
  keep a flag to append the enabled expressions (part of the string) to the final
  result</p>\n</li>\n<li>\n<p>If none of them are found, return the string(line) as
  it is</p>\n</li>\n<li>\n<p>If we found either of them then:</p>\n<ul>\n<li>\n<p>If
  we find don’t first (<code>don’t()</code> appears before <code>do()</code>)</p>\n<ul>\n<li>\n<p>If
  the enabled flag is true → append the string before the <code>don’t()</code> expression</p>\n</li>\n<li>\n<p>Then
  toggle the enabled as false and trim off the <code>don’t()</code> part<br />\n(This
  way we have completed checking everything before the don’t expression, so we remove
  that part from the line string)</p>\n</li>\n</ul>\n</li>\n<li>\n<p>If we find do
  first (<code>do()</code> appears before <code>don’t()</code>)</p>\n<ul>\n<li>\n<p>If
  the enabled flag is true → append the string before the <code>do()</code> expression</p>\n</li>\n<li>\n<p>Then
  toggle the enabled as true and trim off the <code>do()</code> part<br />\n(This
  way we have completed checking everything before the do expression, so we remove
  the part from the line string)</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>We
  do this until there is no line string left to be checked</p>\n</li>\n</ul>\n<h3>Code</h3>\n<p>I
  used simple Strings.Index to get the first match index for the substring, In this
  case, I want the first matching index for <code>don’t()</code> and <code>do()</code>
  . Once we have the indices of both the matches, we can iterate over till we are
  not left with any do or don’ts in the string.</p>\n<p>If we have either do or don’t
  we append to the string the part before don’t if enabled or part before do if enabled
  and toggle on and off the enabled flag accordingly. By the end of the loop, the
  result string will have only the enabled parts of the line/string.</p>\n<pre class='wrapper'>\n\n<div
  class='copy-wrapper'>\n\n<button class='copy' title='copy code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>go</div>\n<div class=\"highlight\"><pre><span></span><span
  class=\"kd\">func</span><span class=\"w\"> </span><span class=\"nx\">StripDoDont</span><span
  class=\"p\">(</span><span class=\"nx\">line</span><span class=\"w\"> </span><span
  class=\"kt\">string</span><span class=\"p\">)</span><span class=\"w\"> </span><span
  class=\"kt\">string</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">result</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">enabled</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kc\">true</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">dontOffset</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nb\">len</span><span
  class=\"p\">(</span><span class=\"s\">&quot;don&#39;t()&quot;</span><span class=\"p\">)</span><span
  class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nx\">doOffset</span><span
  class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nb\">len</span><span
  class=\"p\">(</span><span class=\"s\">&quot;do()&quot;</span><span class=\"p\">)</span><span
  class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"k\">for</span><span
  class=\"w\"> </span><span class=\"nb\">len</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">)</span><span class=\"w\"> </span><span
  class=\"p\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span
  class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">
  \       </span><span class=\"nx\">dontIndex</span><span class=\"w\"> </span><span
  class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strings</span><span
  class=\"p\">.</span><span class=\"nx\">Index</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">,</span><span class=\"w\"> </span><span
  class=\"s\">&quot;don&#39;t()&quot;</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span
  class=\"w\">        </span><span class=\"nx\">doIndex</span><span class=\"w\"> </span><span
  class=\"o\">:=</span><span class=\"w\"> </span><span class=\"nx\">strings</span><span
  class=\"p\">.</span><span class=\"nx\">Index</span><span class=\"p\">(</span><span
  class=\"nx\">line</span><span class=\"p\">,</span><span class=\"w\"> </span><span
  class=\"s\">&quot;do()&quot;</span><span class=\"p\">)</span><span class=\"w\"></span>\n\n<span
  class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span
  class=\"nx\">dontIndex</span><span class=\"w\"> </span><span class=\"o\">==</span><span
  class=\"w\"> </span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"w\">
  </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"nx\">doIndex</span><span
  class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"o\">-</span><span
  class=\"mi\">1</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span
  class=\"nx\">enabled</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nx\">result</span><span
  class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">}</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"k\">break</span><span
  class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span
  class=\"w\"></span>\n<span class=\"w\">        </span>\n<span class=\"w\">        </span><span
  class=\"k\">if</span><span class=\"w\"> </span><span class=\"nx\">dontIndex</span><span
  class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"o\">-</span><span
  class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span
  class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">doIndex</span><span
  class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"o\">-</span><span
  class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">||</span><span
  class=\"w\"> </span><span class=\"nx\">dontIndex</span><span class=\"w\"> </span><span
  class=\"p\">&lt;</span><span class=\"w\"> </span><span class=\"nx\">doIndex</span><span
  class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span
  class=\"nx\">enabled</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nx\">result</span><span
  class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"p\">[:</span><span class=\"nx\">dontIndex</span><span class=\"p\">]</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">}</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nx\">enabled</span><span
  class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"kc\">false</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nx\">line</span><span
  class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"p\">[</span><span class=\"nx\">dontIndex</span><span class=\"o\">+</span><span
  class=\"nx\">dontOffset</span><span class=\"p\">:]</span><span class=\"w\"></span>\n<span
  class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"> </span><span
  class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"k\">if</span><span
  class=\"w\"> </span><span class=\"nx\">enabled</span><span class=\"w\"> </span><span
  class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span
  class=\"nx\">result</span><span class=\"w\"> </span><span class=\"o\">+=</span><span
  class=\"w\"> </span><span class=\"nx\">line</span><span class=\"p\">[:</span><span
  class=\"nx\">doIndex</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span
  class=\"w\">            </span><span class=\"nx\">enabled</span><span class=\"w\">
  </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"kc\">true</span><span
  class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nx\">line</span><span
  class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"nx\">line</span><span
  class=\"p\">[</span><span class=\"nx\">doIndex</span><span class=\"o\">+</span><span
  class=\"nx\">doOffset</span><span class=\"p\">:]</span><span class=\"w\"></span>\n<span
  class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span
  class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n\n<span
  class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span
  class=\"nx\">result</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span
  class=\"w\"></span>\n</pre></div>\n\n</pre>\n\n<p>I take this function and pass
  it to the multiply function where I get the matching patterns for the <code>mul</code>
  expression and do the math.</p>\n<p>The <a href=\"https://pkg.go.dev/strings#Index\">strings.Index</a>
  method takes in a string and a substring to find within that string and returns
  the index of the first occurring instance of that substring. With that we can identify
  if the line string contains the <code>do()</code> or <code>don’t()</code> expressions,
  if they don’t we simply return the line and if there are instances of them, we loop
  and trim the string before and after the expressions depending on whether the flag
  is enabled or disabled.</p>\n<p>Let’s take an example and walk through the logic:</p>\n<pre
  class='wrapper'>\n\n<div class='copy-wrapper'>\n\n<button class='copy' title='copy
  code to clipboard' onclick=\"navigator.clipboard.writeText(this.parentElement.parentElement.querySelector('pre').textContent)\"><svg
  version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"
  x=\"0px\" y=\"0px\" viewBox=\"0 0 115.77 122.88\" style=\"enable-background:new
  0 0 115.77 122.88\" xml:space=\"preserve\"><style type=\"text/css\">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path
  class=\"st0\" d=\"M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02
  v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02
  c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1
  c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7
  h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z
  M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65
  v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z
  M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01
  c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02
  v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z\"/></g></svg></button>\n</div>\n
  \       \n<div class='language-bar'>plaintext</div>\n<div class=\"highlight\"><pre><span></span>abcxmul(1,3)don&#39;t()mul(9,
  7)do()mul(1,2)don&#39;t()mul(8,7)\n\nenabled = True\nresult = &quot;&quot;\nline
  = &quot;abcxmul(1,3)don&#39;t()mul(9, 7)do()mul(1,2)don&#39;t()mul(8,7)&quot;\n---\nAfter
  Iteration 1:\n    result -&gt; abcxmul(1,3)\n    line -&gt; mul(9, 7)do()mul(1,2)don&#39;t()mul(8,7)\n
  \   enabled = False\n---\nAfter Iteration 2:\n    result -&gt; abcxmul(1,3)\n    line
  -&gt; mul(1,2)don&#39;t()mul(8,7)\n    enabled = True\n---\nAfter Iteration 3:\n
  \   result -&gt; abcxmul(1,3)mul(1,2)\n    line -&gt; mul(8,7)\n    enabled -&gt;
  False\n---\nAfter Iteration 4:\n    No do and don&#39;t found\n    result -&gt;
  abcxmul(1,3)mul(1,2)\n    break out of loop\n---\n\nResult -&gt; abcxmul(1,3)mul(1,2)\n</pre></div>\n\n</pre>\n\n<p>We
  process the result with the same <code>Multiply</code> function that we used in
  the first part after passing it through the <code>FindMulExpression</code> function
  that will return all the mul expressions in the result line string.</p>\n<h3>Heads
  up with the input</h3>\n<p>The actual input of the puzzle is I think multiple lines,
  so we need to preserve this state of the line in all the remaining lines. OR, we
  could be smarter and create a single large string and process that. Both are valid
  and would give the same results. I just didn’t like to add an overhead of keeping
  track of all the states and line, so I just concatenated all the lines and processed
  that single string.</p>\n<h2>Conclusion</h2>\n<p>This was a simple problem in essence
  but if you are not aware of regex you could go down a rabbit hole of writing your
  own parser or wired string manipulation (just like I did).</p>\n<p>That’s it form
  day 3, I will be doing more live stream solving over the weekend and may be the
  next week as well. Find the code for my AoC solutions here on GitHub.</p>\n<p>Till
  then,</p>\n<p>Happy Coding :)</p>\n"
image_url: https://meetgor-cdn.pages.dev/aoc-2024-day-2.png
long_description: 'Inspired by Shradha Agarwal’s post on Byte Size Go : That is a
  blogvent series, I would also love to take part in blogvent but can Well, it is
  day 3 of the advent of code 2024, and I have been doing it on live streams. I am
  behind two days but workin'
now: 2025-05-01 18:11:33.312178
path: blog/posts/2024-12-07-AOC-day-3.md
prevnext: null
series:
- Advent of Code 2024
slug: aoc-2024-day-3
status: published
tags:
- go
- aoc
- advent-of-code
- aoc-2024
templateKey: blog-post
title: 'Advent of Code Day 3 in Golang: Do Or Don’t Regex'
today: 2025-05-01
---

Inspired by Shradha Agarwal’s post on Byte Size Go :[here](https://www.bytesizego.com/blog/aoc-day3-golang): I decided to write about my approach to this, it’s different, and would like to share it. That post was well written and the solution was compact and simple, I recommend reading that first as well.

That is a blogvent series, I would also love to take part in blogvent but can't be sure I'll be completing this.

## Introduction

Well, it is day 3 of the advent of code 2024, and I have been doing it on live streams. I am behind two days but working through them one by one. So far, I have learned a lot of things in Go. Let’s dive in for the day 3.

## Part 1

Part one to any AOC problem seems straightforward, but as soon as part two is revealed, the real implementation starts to break the sweat (if you weren’t optimistic or thoughtful)

For part 1 for this day, was to parse a string that contained `mul(X,Y`) an expression, where X could be any 3-digit number. So, there could be multiple such expressions within the string and the purpose was to multiply the X and Y in the individual expression and add them up.

![AOC Day 3 Part 1](https://meetgor-cdn.pages.dev/aoc-2024-d3-solution-part1.jpg)

```plaintext

xmul(2,4)&mul[3,7]!^don't()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))
```

In this example above there are 4 such expressions, and if we add the multiplications of those, we get the answer as 161.

### Approach

It looks like a Regex pattern, finding an expression-like pattern in a string. So, the approach would be to find such expressions with a regex pattern and parse the numbers to integers, and multiply them, simply.

You could go ahead and write the parser for iterating over each character in the string and parsing the tokens, then evaluating the expression. That is a valid approach, but I choose to do this because I don’t know how to write a parser honestly, I want to try that solution at the end as well.

But for the first part, a quick regular expression seems a good idea.

### Constructing the Regular Expression

The first thing is to write the regular expression for the `mul(X,Y)` part which is the only challenging section in part one. The rest is just simple math.

So, we need to find `mul`, then a `(` then any number which is 1 to 3 digits long, then `,` and again a number that is 1 to 3 digits long, and finally ends with a `)`

That translates to:

```plaintext
mul\((\d{1,3}),(\d{1,3})\) 
```

Let’s breakdown:

* `mul` for capturing the literal word `mul`
    
* `\(` this is for the first parenthesis in the expression `mul()` , we need to escape the bracket in a regular expression if we want to match it, so we use `\` before it.
    
* Then we have a match group `(\d{1,3})` , this will be the `X` in `mul(X,Y)`:
    
    * A match group is like a group of a match in a regex, basically, if you want to capture specific parts in the entire match, then we use `()` to group them individually, this is not necessary but helps in getting the right things without overhead
        
    * In this case, we are using a match group for capturing a number which can have 1 to 3 digits.
        
    * The other way to write this is `([0-9]{1,3})` , which also would do the same thing, (NOTE: there are some differences in `[0-9]` and `\d`, but that is very subtle and won’t affect this puzzle, if you are still curious, I prefer reading this [StackOverflow question](https://unix.stackexchange.com/questions/414226/difference-between-0-9-digit-and-d))
        
* We then use `,` for the separator of `X` and `Y` operands in the `mul(X,Y)` expression
    
* We then similarly do the match for `Y` in `mul(X,Y)` with the `(\d{1,3})` match group
    
* Finally, we end the regular expression with the `)` to end the expression
    

### Code it

This is quite straightforward, we grab the line as a string and use [regexp.MustCompile](https://pkg.go.dev/regexp#MustCompile) function which gives us a [Regexp](https://pkg.go.dev/regexp#Regexp) object, that in turn has a few methods associated with it to find, match, replace, and other things that can be done with a regular expression on a string.

Once we have the `mulRegex` , we can use the [FindAllStringSubmatch](https://pkg.go.dev/regexp#Regexp.FindAllStringSubmatch) method associated with the `Regexp` struct in the `regexp` package. The function takes in a string to perform the regex on, and the maximum number of matches to return. We want all the results, so we pass them in `-1` to get all the matches.

Now, this method returns a slice of a slice of strings, each slice is a match, and within each slice, there is a slice of string, with the matched string and the subsequent match groups in the string if any.

```go
func FindMulExpression(line string) [][]string {
  mulRegex := regexp.MustCompile(`mul\((\d{1,3}),(\d{1,3})\)`)
  return mulRegex.FindAllStringSubmatch(line, len(line))
}
```

So, the above function will return something like this

```go
[
    [mul(2,4) 2 4]
    [mul(5,5) 5 5]
    [mul(11,8) 11 8]
    [mul(8,5) 8 5]
]
```

This is a list of list of strings, these look like numbers but those are string types in Golang.

Now we have this, we can create the actual logic part of obtaining the result, which is to parse these expressions, multiply `X` and `Y` and add the results for each of the expressions.

```go
func Multiply(matches [][]string) int {
	score := 0
	for _, match := range matches {
		x, err := strconv.Atoi(string(match[1]))
		if err != nil {
			panic(err)
		}
		y, err := strconv.Atoi(string(match[2]))
		if err != nil {
			panic(err)
		}
		score += x * y
	}
	return score
}
```

This is pretty straightforward, we iterate over each of the matches, that is one `mul(X,Y)` expression and parse the `X` and `Y` each into integers and multiply them, the result obtained is then added to the score. We do this for each `mul(X,Y)` expression that is found in the string(line) and return the final score.

### Input

Now, the example gave us a single string, but I realized there were six lines in the input (individual input), so we needed to parse each line and add up the score.

Remember this as it will be critical in part 2, it took me some time and questioning my existence to realize we need to combine all the lines to get the result (not necessary in part 1 but for sure in part 2).

## Part 2

This is where things go wrong usually. At least for me, it did.

I started with a very naive approach, with a forever loop and finding the index of do or don’t and stripping off those sections, and then looping until we have no do and don’ts left. That was working for the test case but failed on the actual input.

The approach I finally came up and was working by tweaking the same approach slightly.

### Approach

What I came up with is to find the first match location of `don’()` and `do()` strings in the entire string, we take that and remove the parts after `don’t()` or before `do()` . That way we can trim down the string to only valid/enabled `mul()`expressions.

![AOC Day 3 Part 2](https://meetgor-cdn.pages.dev/aoc-2024-d3-solution-part2.jpg)

So, the approach more clearly defined will be:

* Find the location (index) of the `don’t()` and `do()` expressions
    
* We need to keep track of whether the previous string was enabled or disabled so will keep a flag to append the enabled expressions (part of the string) to the final result
    
* If none of them are found, return the string(line) as it is
    
* If we found either of them then:
    
    * If we find don’t first (`don’t()` appears before `do()`)
        
        * If the enabled flag is true → append the string before the `don’t()` expression
            
        * Then toggle the enabled as false and trim off the `don’t()` part  
            (This way we have completed checking everything before the don’t expression, so we remove that part from the line string)
            
    * If we find do first (`do()` appears before `don’t()`)
        
        * If the enabled flag is true → append the string before the `do()` expression
            
        * Then toggle the enabled as true and trim off the `do()` part  
            (This way we have completed checking everything before the do expression, so we remove the part from the line string)
            
* We do this until there is no line string left to be checked
    

### Code

I used simple Strings.Index to get the first match index for the substring, In this case, I want the first matching index for `don’t()` and `do()` . Once we have the indices of both the matches, we can iterate over till we are not left with any do or don’ts in the string.

If we have either do or don’t we append to the string the part before don’t if enabled or part before do if enabled and toggle on and off the enabled flag accordingly. By the end of the loop, the result string will have only the enabled parts of the line/string.

```go
func StripDoDont(line string) string {
    result := ""
    enabled := true
    dontOffset := len("don't()")
    doOffset := len("do()")

    for len(line) > 0 {
        dontIndex := strings.Index(line, "don't()")
        doIndex := strings.Index(line, "do()")

        if dontIndex == -1 && doIndex == -1 {
            if enabled {
                result += line
            }
            break
        }
        
        if dontIndex != -1 && (doIndex == -1 || dontIndex < doIndex) {
            if enabled {
                result += line[:dontIndex]
            }
            enabled = false
            line = line[dontIndex+dontOffset:]
        } else {
            if enabled {
                result += line[:doIndex]
            }
            enabled = true
            line = line[doIndex+doOffset:]
        }
    }

    return result
}
```

I take this function and pass it to the multiply function where I get the matching patterns for the `mul` expression and do the math.

The [strings.Index](https://pkg.go.dev/strings#Index) method takes in a string and a substring to find within that string and returns the index of the first occurring instance of that substring. With that we can identify if the line string contains the `do()` or `don’t()` expressions, if they don’t we simply return the line and if there are instances of them, we loop and trim the string before and after the expressions depending on whether the flag is enabled or disabled.

Let’s take an example and walk through the logic:

```plaintext
abcxmul(1,3)don't()mul(9, 7)do()mul(1,2)don't()mul(8,7)

enabled = True
result = ""
line = "abcxmul(1,3)don't()mul(9, 7)do()mul(1,2)don't()mul(8,7)"
---
After Iteration 1:
    result -> abcxmul(1,3)
    line -> mul(9, 7)do()mul(1,2)don't()mul(8,7)
    enabled = False
---
After Iteration 2:
    result -> abcxmul(1,3)
    line -> mul(1,2)don't()mul(8,7)
    enabled = True
---
After Iteration 3:
    result -> abcxmul(1,3)mul(1,2)
    line -> mul(8,7)
    enabled -> False
---
After Iteration 4:
    No do and don't found
    result -> abcxmul(1,3)mul(1,2)
    break out of loop
---

Result -> abcxmul(1,3)mul(1,2)
```

We process the result with the same `Multiply` function that we used in the first part after passing it through the `FindMulExpression` function that will return all the mul expressions in the result line string.

### Heads up with the input

The actual input of the puzzle is I think multiple lines, so we need to preserve this state of the line in all the remaining lines. OR, we could be smarter and create a single large string and process that. Both are valid and would give the same results. I just didn’t like to add an overhead of keeping track of all the states and line, so I just concatenated all the lines and processed that single string.

## Conclusion

This was a simple problem in essence but if you are not aware of regex you could go down a rabbit hole of writing your own parser or wired string manipulation (just like I did).

That’s it form day 3, I will be doing more live stream solving over the weekend and may be the next week as well. Find the code for my AoC solutions here on GitHub.

Till then,

Happy Coding :)