<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>Connecting LibSQL database with Python | Meet Gor</title>
    <meta name="title" content="Connecting LibSQL database with Python | Meet Gor">
    <meta name="description" content="">
    <meta name="author" content="Meet Gor">
    <meta name="keywords" content="libsql, python">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="meetgor.com/libsql-python">
    
    
    <meta property="og:type" content="article">
    <meta property="og:url" content="meetgor.com/libsql-python">
    <meta property="og:title" content="Connecting LibSQL database with Python | Meet Gor">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://meetgor-cdn.pages.dev/connect-libsql-with-python.png">
    <meta property="og:site_name" content="Meet Gor">
    <meta property="article:published_time" content="2023-11-30">
    <meta property="article:modified_time" content="2023-11-30">
    <meta property="article:author" content="Meet Gor">
    
    <meta property="article:tag" content="libsql">
    
    <meta property="article:tag" content="python">
    
    
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@meetgor711">
    <meta name="twitter:creator" content="@meetgor711">
    <meta name="twitter:url" content="meetgor.com/libsql-python">
    <meta name="twitter:title" content="Connecting LibSQL database with Python | Meet Gor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://meetgor-cdn.pages.dev/connect-libsql-with-python.png">
    
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "meetgor.com/libsql-python"
        },
        "headline": "Connecting LibSQL database with Python",
        "description": "",
        "datePublished": "2023-11-30",
        "dateModified": "2023-11-30",
        "author": {
            "@type": "Person",
            "name": "Meet Gor"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Meet Gor",
            "logo": {
                "@type": "ImageObject",
                "url": "meetgor.com/tbicon.png"
            }
        },
        "image": "https:\/\/meetgor-cdn.pages.dev\/connect-libsql-with-python.png",
        "keywords": "libsql, python",
        "articleBody": "\u0026lt;h2 id=\u0026#34;introduction\u0026#34;\u0026gt;Introduction\u0026lt;\/h2\u0026gt;\n\u0026lt;p\u0026gt;LibSQL is an \u0026lt;strong\u0026gt;Open Contribution\u0026lt;\/strong\u0026gt; fork of SQLite. Open Contribution means that it allows suggestions and contributions from the community as opposed to SQLite which is open source but doesn\u0026#39;t accept community contributions.\u0026lt;\/p\u0026gt;\n\u0026lt;h2 id=\u0026#34;installation-of-libsql-clients\u0026#34;\u0026gt;Installation of LibSQL Client(s)\u0026lt;\/h2\u0026gt;\n\u0026lt;p\u0026gt;There are two libraries for LibSQL to interact with Python, the \u0026lt;a href=\u0026#34;https:\/\/github.com\/libsql\/libsql-client-py\/\u0026#34;\u0026gt;libsql-client\u0026lt;\/a\u0026gt; and the \u0026lt;a href=\u0026#34;https:\/\/github.com\/libsql\/libsql-experimental-python\u0026#34;\u0026gt;libsql-experimental-python\u0026lt;\/a\u0026gt;. The former is the recommended client as it is stable, whereas the latter is in development and has the latest features from the libsql database engine, however, it is compatible with the \u0026lt;a href=\u0026#34;https:\/\/docs.python.org\/3\/library\/sqlite3.html\u0026#34;\u0026gt;sqlite\u0026lt;\/a\u0026gt; module.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;There are differences in how to connect and fetch responses in each of them, but if you want to get started quickly you can safely turn with the \u0026lt;code\u0026gt;libsql-client\u0026lt;\/code\u0026gt; as it is recommended from the official documentation. If you want to connect an existing SQLite database to libsql, you can turn up the \u0026lt;code\u0026gt;libsql-experimental-pyhon\u0026lt;\/code\u0026gt; package.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;We will explore both of them in this article. Let\u0026#39;s dive straight into the installation of the package.\u0026lt;\/p\u0026gt;\n\u0026lt;h2 id=\u0026#34;libsql-client\u0026#34;\u0026gt;LibSQL Client\u0026lt;\/h2\u0026gt;\n\u0026lt;p\u0026gt;So, Libsql-client is the Python package provided by Turso as a Python client to interact with a libsql\/sqlite database.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;installation\u0026#34;\u0026gt;Installation\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;The installation of a Python package is as simple as a pip install.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;bash\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-bash\u0026#34;\u0026gt; pip install libsql-client\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;h3 id=\u0026#34;connecting-to-the-database\u0026#34;\u0026gt;Connecting to the database\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;Connecting to a libsql database is as simple as SQLite for the local database file. However, if you have a libsql database over the edge(Turso), you can use the API provided by SQLD to connect to that database.\u0026lt;\/p\u0026gt;\n\u0026lt;h4 id=\u0026#34;connecting-local-database-file\u0026#34;\u0026gt;Connecting Local database file\u0026lt;\/h4\u0026gt;\n\u0026lt;p\u0026gt;To connect to a simple libsql database file, you can either create a file as \u0026lt;code\u0026gt;mydb.db\u0026lt;\/code\u0026gt; or just move into the code straight away.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;python\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-python\u0026#34;\u0026gt;import libsql_client\n\nclient = libsql_client.create_client_sync(\u0026#34;file:temp.db\u0026#34;)\nresult = client.execute(\u0026#34;SELECT 1;\u0026#34;)\n\nfor row in result.rows:\n    print(row)\nclient.close()\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;OR\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;python\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-python\u0026#34;\u0026gt;import libsql_client\n\nwith libsql_client.create_client_sync(\u0026#34;file:temp.db\u0026#34;) as client:\n    result = client.execute(\u0026#34;SELECT 1;\u0026#34;)\n    \n    for row in result.rows:\n        print(row)\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;So, in the above code, the \u0026lt;code\u0026gt;client\u0026lt;\/code\u0026gt; object is a client of the libsql database. We use the \u0026lt;a href=\u0026#34;https:\/\/libsql.org\/libsql-client-py\/reference.html#create_client_sync\u0026#34;\u0026gt;create_client_sync\u0026lt;\/a\u0026gt; method that accepts a few parameters \u0026lt;code\u0026gt;url\u0026lt;\/code\u0026gt; i.e. the URL of the database we want to connect to, and the \u0026lt;code\u0026gt;auth_token\u0026lt;\/code\u0026gt; which we will see when we want to connect to a database on the edge.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;There is also \u0026lt;a href=\u0026#34;https:\/\/libsql.org\/libsql-client-py\/reference.html#create_client\u0026#34;\u0026gt;create_client\u0026lt;\/a\u0026gt; method which is an async method. You can turn up to this method if you are looking for async connections.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;We have used \u0026lt;code\u0026gt;file:temp.db\u0026lt;\/code\u0026gt; i.e. to connect a local file in the current directory named \u0026lt;code\u0026gt;temp.db\u0026lt;\/code\u0026gt; . This method will return a \u0026lt;a href=\u0026#34;https:\/\/libsql.org\/libsql-client-py\/reference.html#Client\u0026#34;\u0026gt;Client\u0026lt;\/a\u0026gt; object in this case a \u0026lt;a href=\u0026#34;https:\/\/libsql.org\/libsql-client-py\/reference.html#ClientSync\u0026#34;\u0026gt;ClientSync\u0026lt;\/a\u0026gt; object which is a wrapper around the \u0026lt;code\u0026gt;Client\u0026lt;\/code\u0026gt; object. We will be using the methods available for the Client class later while querying in detail. You can see that we have used the \u0026lt;a href=\u0026#34;https:\/\/libsql.org\/libsql-client-py\/reference.html#ClientSync.execute\u0026#34;\u0026gt;execute\u0026lt;\/a\u0026gt; method from the client object.\u0026lt;\/p\u0026gt;\n\u0026lt;h4 id=\u0026#34;connecting-to-a-cloudturso-database\u0026#34;\u0026gt;Connecting to a cloud(turso) database\u0026lt;\/h4\u0026gt;\n\u0026lt;p\u0026gt;To connect to a libsql database on the edge i.e. turso you need to specify the auth token(JWT) in the \u0026lt;code\u0026gt;create_client\u0026lt;\/code\u0026gt; method.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;You can create the token for accessing the database with the\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;bash\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-bash\u0026#34;\u0026gt;turso db tokens create mydb-name\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;This command will create a \u0026lt;code\u0026gt;JWT_TOKEN\u0026lt;\/code\u0026gt; , store this token securely and this will be used to access the database which is hosted on the Turso cloud.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;bash\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-bash\u0026#34;\u0026gt;export JWT_TOKEN=\u0026#34;YOURTOKEN\u0026#34;\nOR\n## Save it in the .env file \n## JWT_TOKEN=YOURTOKEN\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;This will store the token in the environment variable and can be later used from the local environment.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;python\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-python\u0026#34;\u0026gt;import libsql_client\n\nwith libsql_client.create_client_sync(\n    \u0026#34;libsql:\/\/dbname-orgname.turso.io\u0026#34;,\n    auth_token=\u0026#34;secret.something.secret\u0026#34;\n) as client:\n    result = client.execute(\u0026#34;SELECT 1;\u0026#34;)\n    \n    for row in result.rows:\n        print(row)\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;auth_token\u0026lt;\/code\u0026gt; is the JWT Token that we created in the previous step, you can load the token as an Environment variable with the following code:\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;python\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-python\u0026#34;\u0026gt;import os\n\nJWT_TOKEN = os.environ.get(\u0026#34;JWT_TOKEN\u0026#34;)\n\n## OR\n\n# pip install python-dotenv\nfrom dotenv import load_dotenv\nload_dotenv()\nJWT_TOKEN = os.environ.get(\u0026#34;JWT_TOKEN\u0026#34;)\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;This token can be used to authenticate the connection to the Turso database. The rest of the connection code remains as it is.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;running-queries-and-fetching-results\u0026#34;\u0026gt;Running Queries and Fetching results\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;Now, that we have the connection, we can move into querying the database through the client connection.\u0026lt;\/p\u0026gt;\n\u0026lt;h2 id=\u0026#34;libsql-client-sqlite-compatible\u0026#34;\u0026gt;LibSQL-Client (SQLite compatible)\u0026lt;\/h2\u0026gt;\n\u0026lt;h3 id=\u0026#34;installation-1\u0026#34;\u0026gt;Installation\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;The installation of the \u0026lt;a href=\u0026#34;https:\/\/badge.fury.io\/py\/libsql-experimental\u0026#34;\u0026gt;libsql-experimental-python\u0026lt;\/a\u0026gt; package is simple with the pip install command with the name of the package.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;bash\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-bash\u0026#34;\u0026gt;pip install libsql-experimental\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;Now, we can move into connecting to the database with Python script.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;connecting-to-the-database-1\u0026#34;\u0026gt;Connecting to the database\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;Connecting to a libsql database is as simple as SQLite for the local database file.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;syncing-with-a-remote-database\u0026#34;\u0026gt;Syncing with a remote database\u0026lt;\/h3\u0026gt;\n\u0026lt;h3 id=\u0026#34;running-queries-and-fetching-results-1\u0026#34;\u0026gt;Running Queries and Fetching results\u0026lt;\/h3\u0026gt;\n"
    }
    </script>
    
    
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/code-block.css">
    
    <link rel="icon" href="/tbicon.png" type="image/png">
    <link rel="apple-touch-icon" href="/tbicon.png">
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link id="syntax-theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.13.0/sql-wasm.js"></script>
    <link rel="stylesheet" href="/sql-playground.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/monokai.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/sql/sql.min.js"></script>
    <script src="/sql-playground.js"></script>
    
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const body = document.body;
        const stylesheet = document.getElementById("syntax-theme");
        const themeToggle = document.getElementById('theme-toggle');

        function setSyntaxTheme(theme) {
            if (theme === "secondary") {
                stylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css";
            } else {
                stylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css";
            }
        }

        
        document.querySelectorAll("pre code").forEach((block) => {
            hljs.highlightElement(block);
        });

        
        const currentTheme = localStorage.getItem("theme") || "default";
        if (currentTheme === "secondary") {
            body.classList.add("secondary-theme");
            if (themeToggle) themeToggle.checked = true;
        }
        setSyntaxTheme(currentTheme);

        
        if (themeToggle) {
            themeToggle.addEventListener('change', () => {
                const newTheme = themeToggle.checked ? 'secondary' : 'default';
                if (themeToggle.checked) {
                    body.classList.add('secondary-theme');
                } else {
                    body.classList.remove('secondary-theme');
                }
                localStorage.setItem('theme', newTheme);
                setSyntaxTheme(newTheme);
            });
        }
        
        
        const editBtn = document.getElementById('editor-edit');
        if (editBtn) {
            editBtn.addEventListener('click', async function () {
                const slug = "libsql-python";
                const type = "posts";
                console.log("Editing post:", slug, type);
                const url = "https:\/\/devmeetgor.netlify.app/.netlify/functions/api?slug=" + slug + "&method=edit&type=" + type;
                
                try {
                    const res = await fetch(url);
                    if (!res.ok) throw new Error("Failed to fetch edit content");
                    const html = await res.text();
                    document.querySelector('.post-content').innerHTML = html;
                } catch (err) {
                    console.error(err);
                    alert("Error loading editor content");
                }
            });
        }
    });
    </script>
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EET2ZX4QY1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-EET2ZX4QY1');
    </script>
</head>
<body>
    <header class="header">
  <a class="site-title" href="/" aria-label="Meet Gor - Home">Meet Gor</a>
  <nav>
    <ul>
      <li><a href="/" aria-label="Home">Home</a></li>
      <li><a href="/posts" aria-label="Posts">Posts</a></li>
      <li><a href="/about" aria-label="About">About</a></li>
      <li><a href="/contact" aria-label="Contact">Contact</a></li>
    </ul>
  </nav>
  <div class="theme-switch">
    <input type="checkbox" id="theme-toggle" aria-label="Toggle Theme">
    <label for="theme-toggle"></label>
  </div>
  
</header>
    
    <main class="container">
        <article class="blog-post">
            <h1>Connecting LibSQL database with Python</h1>
            
            <div class="post-meta">
                Published on 📅 <time datetime="2023-11-30">2023-11-30</time>
            </div>
            
            <div class="post-meta">
                Type: <a href="/posts">posts</a>
            </div>
            
            <div class="post-meta tags">
                <span class="post-series-label">🏷️ Tags:</span>
                
                <a href="/tags/libsql">#libsql</a>
                
                <a href="/tags/python">#python</a>
                
            </div>
            
            
            
            
            
            <hr>
            
            <div class="post-content">
                <h2 id="introduction">Introduction</h2>
<p>LibSQL is an <strong>Open Contribution</strong> fork of SQLite. Open Contribution means that it allows suggestions and contributions from the community as opposed to SQLite which is open source but doesn't accept community contributions.</p>
<h2 id="installation-of-libsql-clients">Installation of LibSQL Client(s)</h2>
<p>There are two libraries for LibSQL to interact with Python, the <a href="https://github.com/libsql/libsql-client-py/">libsql-client</a> and the <a href="https://github.com/libsql/libsql-experimental-python">libsql-experimental-python</a>. The former is the recommended client as it is stable, whereas the latter is in development and has the latest features from the libsql database engine, however, it is compatible with the <a href="https://docs.python.org/3/library/sqlite3.html">sqlite</a> module.</p>
<p>There are differences in how to connect and fetch responses in each of them, but if you want to get started quickly you can safely turn with the <code>libsql-client</code> as it is recommended from the official documentation. If you want to connect an existing SQLite database to libsql, you can turn up the <code>libsql-experimental-pyhon</code> package.</p>
<p>We will explore both of them in this article. Let's dive straight into the installation of the package.</p>
<h2 id="libsql-client">LibSQL Client</h2>
<p>So, Libsql-client is the Python package provided by Turso as a Python client to interact with a libsql/sqlite database.</p>
<h3 id="installation">Installation</h3>
<p>The installation of a Python package is as simple as a pip install.</p>
<div class="code-block"><div class="code-header"><span class="language-name">bash</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-bash"> pip install libsql-client
</code></pre></div><h3 id="connecting-to-the-database">Connecting to the database</h3>
<p>Connecting to a libsql database is as simple as SQLite for the local database file. However, if you have a libsql database over the edge(Turso), you can use the API provided by SQLD to connect to that database.</p>
<h4 id="connecting-local-database-file">Connecting Local database file</h4>
<p>To connect to a simple libsql database file, you can either create a file as <code>mydb.db</code> or just move into the code straight away.</p>
<div class="code-block"><div class="code-header"><span class="language-name">python</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-python">import libsql_client

client = libsql_client.create_client_sync("file:temp.db")
result = client.execute("SELECT 1;")

for row in result.rows:
    print(row)
client.close()
</code></pre></div><p>OR</p>
<div class="code-block"><div class="code-header"><span class="language-name">python</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-python">import libsql_client

with libsql_client.create_client_sync("file:temp.db") as client:
    result = client.execute("SELECT 1;")
    
    for row in result.rows:
        print(row)
</code></pre></div><p>So, in the above code, the <code>client</code> object is a client of the libsql database. We use the <a href="https://libsql.org/libsql-client-py/reference.html#create_client_sync">create_client_sync</a> method that accepts a few parameters <code>url</code> i.e. the URL of the database we want to connect to, and the <code>auth_token</code> which we will see when we want to connect to a database on the edge.</p>
<p>There is also <a href="https://libsql.org/libsql-client-py/reference.html#create_client">create_client</a> method which is an async method. You can turn up to this method if you are looking for async connections.</p>
<p>We have used <code>file:temp.db</code> i.e. to connect a local file in the current directory named <code>temp.db</code> . This method will return a <a href="https://libsql.org/libsql-client-py/reference.html#Client">Client</a> object in this case a <a href="https://libsql.org/libsql-client-py/reference.html#ClientSync">ClientSync</a> object which is a wrapper around the <code>Client</code> object. We will be using the methods available for the Client class later while querying in detail. You can see that we have used the <a href="https://libsql.org/libsql-client-py/reference.html#ClientSync.execute">execute</a> method from the client object.</p>
<h4 id="connecting-to-a-cloudturso-database">Connecting to a cloud(turso) database</h4>
<p>To connect to a libsql database on the edge i.e. turso you need to specify the auth token(JWT) in the <code>create_client</code> method.</p>
<p>You can create the token for accessing the database with the</p>
<div class="code-block"><div class="code-header"><span class="language-name">bash</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-bash">turso db tokens create mydb-name
</code></pre></div><p>This command will create a <code>JWT_TOKEN</code> , store this token securely and this will be used to access the database which is hosted on the Turso cloud.</p>
<div class="code-block"><div class="code-header"><span class="language-name">bash</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-bash">export JWT_TOKEN="YOURTOKEN"
OR
## Save it in the .env file 
## JWT_TOKEN=YOURTOKEN
</code></pre></div><p>This will store the token in the environment variable and can be later used from the local environment.</p>
<div class="code-block"><div class="code-header"><span class="language-name">python</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-python">import libsql_client

with libsql_client.create_client_sync(
    "libsql://dbname-orgname.turso.io",
    auth_token="secret.something.secret"
) as client:
    result = client.execute("SELECT 1;")
    
    for row in result.rows:
        print(row)
</code></pre></div><p>The <code>auth_token</code> is the JWT Token that we created in the previous step, you can load the token as an Environment variable with the following code:</p>
<div class="code-block"><div class="code-header"><span class="language-name">python</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-python">import os

JWT_TOKEN = os.environ.get("JWT_TOKEN")

## OR

# pip install python-dotenv
from dotenv import load_dotenv
load_dotenv()
JWT_TOKEN = os.environ.get("JWT_TOKEN")
</code></pre></div><p>This token can be used to authenticate the connection to the Turso database. The rest of the connection code remains as it is.</p>
<h3 id="running-queries-and-fetching-results">Running Queries and Fetching results</h3>
<p>Now, that we have the connection, we can move into querying the database through the client connection.</p>
<h2 id="libsql-client-sqlite-compatible">LibSQL-Client (SQLite compatible)</h2>
<h3 id="installation-1">Installation</h3>
<p>The installation of the <a href="https://badge.fury.io/py/libsql-experimental">libsql-experimental-python</a> package is simple with the pip install command with the name of the package.</p>
<div class="code-block"><div class="code-header"><span class="language-name">bash</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-bash">pip install libsql-experimental
</code></pre></div><p>Now, we can move into connecting to the database with Python script.</p>
<h3 id="connecting-to-the-database-1">Connecting to the database</h3>
<p>Connecting to a libsql database is as simple as SQLite for the local database file.</p>
<h3 id="syncing-with-a-remote-database">Syncing with a remote database</h3>
<h3 id="running-queries-and-fetching-results-1">Running Queries and Fetching results</h3>

            </div>
        </article>
    </main>
    
    <div id="comments">
        <script src="https://giscus.app/client.js"
            data-repo="Mr-Destructive/meetgor.com"
            data-repo-id="R_kgDOHZ6V_g"
            data-category="Q&A"
            data-category-id="DIC_kwDOHZ6V_s4CRfn4"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="dark_high_contrast"
            data-lang="en"
            crossorigin="anonymous"
            async>
        </script>
    </div>
    
    <footer class="site-footer" role="contentinfo">
  <div class="footer-content">
    <p>&copy; Meet Gor. All rights reserved.</p>
    <div class="social-links">
      <a href="/contact" aria-label="Connect with me">Connect with me</a>
    </div>
  </div>
</footer>
    
</body>
</html>
