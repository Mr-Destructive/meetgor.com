<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>Dockerize a Django project | Meet Gor</title>
    <meta name="title" content="Dockerize a Django project | Meet Gor">
    <meta name="description" content="">
    <meta name="author" content="Meet Gor">
    <meta name="keywords" content="django, docker">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="meetgor.com/til/dockerize-django-prj">
    
    
    <meta property="og:type" content="article">
    <meta property="og:url" content="meetgor.com/til/dockerize-django-prj">
    <meta property="og:title" content="Dockerize a Django project | Meet Gor">
    <meta property="og:description" content="">
    <meta property="og:image" content="meetgor.com/tbicon.png">
    <meta property="og:site_name" content="Meet Gor">
    <meta property="article:published_time" content="2022-03-02">
    <meta property="article:modified_time" content="2022-03-02">
    <meta property="article:author" content="Meet Gor">
    
    <meta property="article:tag" content="django">
    
    <meta property="article:tag" content="docker">
    
    
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@meetgor711">
    <meta name="twitter:creator" content="@meetgor711">
    <meta name="twitter:url" content="meetgor.com/til/dockerize-django-prj">
    <meta name="twitter:title" content="Dockerize a Django project | Meet Gor">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="meetgor.com/tbicon.png">
    
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "meetgor.com/til\/dockerize-django-prj"
        },
        "headline": "Dockerize a Django project",
        "description": "",
        "datePublished": "2022-03-02",
        "dateModified": "2022-03-02",
        "author": {
            "@type": "Person",
            "name": "Meet Gor"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Meet Gor",
            "logo": {
                "@type": "ImageObject",
                "url": "meetgor.com/tbicon.png"
            }
        },
        
        "keywords": "django, docker",
        "articleBody": "\u0026lt;h2 id=\u0026#34;dockerize-a-django-project\u0026#34;\u0026gt;Dockerize a Django project\u0026lt;\/h2\u0026gt;\n\u0026lt;p\u0026gt;We can run our Django projects in a Docker Container by creating a Docker image for our project. It is really easy and intuitive to create a Dockerfile for any given application as it really is a matter of writing commands in a file and basically running it is a isolated environment. To create a Docker image, we first need a Dockerfile. A Dockerfile is simply a Blueprint to create a image in Docker. In this file we specify the instructions\/commands\/environment variables to create a image for our app to run.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;create-a-docker-file\u0026#34;\u0026gt;Create a Docker File\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;To create a dockerfile, simply create a file named as \u0026lt;code\u0026gt;Dockerfile\u0026lt;\/code\u0026gt; without any extension(not a .txt file). We need to then add the following code into the file.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;dockerfile\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-dockerfile\u0026#34;\u0026gt;FROM python:3.9-buster\n\nENV PYTHONUNBUFFERED=1\n\nWORKDIR \/code\n\nCOPY requirements.txt .\n\nRUN pip install -r requirements.txt\n\nCOPY . .\n\nEXPOSE 8000\n\nCMD [\u0026#34;python\u0026#34;,\u0026#34;manage.py\u0026#34;,\u0026#34;runserver\u0026#34;,\u0026#34;0.0.0.0:8000\u0026#34;]\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026#39;s see what are we doing here, first we are pulling a base image of Python in this case it is \u0026lt;a href=\u0026#34;https:\/\/github.com\/docker-library\/python\/blob\/a4b368154b7e3c33c76385f1be7a998fcf3123eb\/3.9\/buster\/Dockerfile\u0026#34;\u0026gt;3.9-buster\u0026lt;\/a\u0026gt;, but it can be any of the \u0026lt;a href=\u0026#34;https:\/\/hub.docker.com\/_\/python\u0026#34;\u0026gt;Official Python images\u0026lt;\/a\u0026gt; from \u0026lt;a href=\u0026#34;https:\/\/hub.docker.com\u0026#34;\u0026gt;dockerhub\u0026lt;\/a\u0026gt;. It is simply a environment for our Django project to run. You can even use linux environments like ubuntu, debian or alpine.\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;Next we add a \u0026lt;code\u0026gt;PYTHONUNBUFFERED\u0026lt;\/code\u0026gt; as a environment variable and initialize it to \u0026lt;code\u0026gt;1\u0026lt;\/code\u0026gt;, which basically allows to parse python output straight into the terminal without actually buffering first.\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;We set the \u0026lt;code\u0026gt;WORKDIR\u0026lt;\/code\u0026gt; as the \u0026lt;code\u0026gt;code\u0026lt;\/code\u0026gt; directory, this sets the provided directory as the base to run any command or instructions in the Dockerfile.\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;We then \u0026lt;code\u0026gt;COPY\u0026lt;\/code\u0026gt; the \u0026lt;code\u0026gt;requirements.txt\u0026lt;\/code\u0026gt; file in the current(\u0026lt;code\u0026gt;.\u0026lt;\/code\u0026gt;) directory which is \u0026lt;code\u0026gt;code\u0026lt;\/code\u0026gt; as mentioned earlier. We simply want the \u0026lt;code\u0026gt;requirements.txt\u0026lt;\/code\u0026gt; file in the current directory so we can proceed with the next step which is to install the dependencies for the Django project\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;After copying the \u0026lt;code\u0026gt;requirements.txt\u0026lt;\/code\u0026gt; file, we simply install the packages mentioned int the file with \u0026lt;code\u0026gt;pip\u0026lt;\/code\u0026gt; we use the \u0026lt;code\u0026gt;RUN\u0026lt;\/code\u0026gt; command to execute any shell commands in the environment.\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;Next step is to \u0026lt;code\u0026gt;COPY\u0026lt;\/code\u0026gt; all the files from the current folder(local machine) into the docker environment image. So, we have the source code files in the Container.\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;Expose the port \u0026lt;code\u0026gt;8000\u0026lt;\/code\u0026gt;(default) or any other port you would want to run Django in the image. We use the expose command in complement to the \u0026lt;code\u0026gt;-p\u0026lt;\/code\u0026gt; argument when we want to create the container. I have explained the \u0026lt;a href=\u0026#34;https:\/\/mr-destructive.github.io\/techstructive-blog\/docker-port-forward\u0026#34;\u0026gt;port-forwarding\u0026lt;\/a\u0026gt; concept in the previous TIL.\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\n\u0026lt;p\u0026gt;Finally we can run the server. We need to parse every command as a comma separated string in the list to the \u0026lt;code\u0026gt;CMD\u0026lt;\/code\u0026gt; which the container actually executes the command when the image is build. So, all the commands previously were to build an image for the django project, the \u0026lt;code\u0026gt;CMD\u0026lt;\/code\u0026gt; will actually run the server in a container after building the image of the django project.\u0026lt;\/p\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;\/ul\u0026gt;\n\u0026lt;h3 id=\u0026#34;build-the-image\u0026#34;\u0026gt;Build the image\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;Using the Dockerfile, we can create the image for the Django project by a simple command.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;docker build . -t django-app\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;Assuming the Dockerfile is in the same folder from which you are running this command.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026#34;https:\/\/res.cloudinary.com\/techstructive-blog\/image\/upload\/v1646230907\/blog-media\/jj04subyvkuvfb5obytu.png\u0026#34; alt=\u0026#34;Build the django-app image\u0026#34;\u0026gt;\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026#34;https:\/\/res.cloudinary.com\/techstructive-blog\/image\/upload\/v1646230988\/blog-media\/ugjoakqgyhiwelqkyaat.png\u0026#34; alt=\u0026#34;Build Complete Success\u0026#34;\u0026gt;\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;run-the-image-and-create-a-container\u0026#34;\u0026gt;Run the Image and Create a Container\u0026lt;\/h3\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;docker run -p 8000:8000 django-app\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;\u0026lt;img src=\u0026#34;https:\/\/res.cloudinary.com\/techstructive-blog\/image\/upload\/v1646231023\/blog-media\/yneuz46burorz4b5vzp4.png\u0026#34; alt=\u0026#34;Create Container\u0026#34;\u0026gt;\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;You can use any port like \u0026lt;code\u0026gt;3000\u0026lt;\/code\u0026gt; or \u0026lt;code\u0026gt;4000\u0026lt;\/code\u0026gt; on your local system by changing the first port number as \u0026lt;code\u0026gt;3000:8000\u0026lt;\/code\u0026gt; and so on. So, the first port number is the local system\u0026#39;s port number and the port number followed by a \u0026lt;code\u0026gt;:\u0026lt;\/code\u0026gt; is the port number for the environment inside the container of the django project. The container port is the same which we have \u0026lt;code\u0026gt;exposed\u0026lt;\/code\u0026gt; while creating the image. You can now go to \u0026lt;a href=\u0026#34;127.0.0.1:8000\u0026#34;\u0026gt;127.0.0.1:8000\u0026lt;\/a\u0026gt; or your chosen port in your local environment and see the django app running.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;If you are using a Docker as a Virtual Machine, you need to find the IP-address of that Virtual-Machine(\u0026lt;code\u0026gt;docker-machine ip\u0026lt;\/code\u0026gt;) and use that instead of \u0026lt;code\u0026gt;localhost\u0026lt;\/code\u0026gt; or \u0026lt;code\u0026gt;127.0.0.1\u0026lt;\/code\u0026gt;.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;cleaning-the-container-for-iterations\u0026#34;\u0026gt;Cleaning the Container for iterations\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;We need to stop the container to run it again after making a few changes in the app if any. Simply pressing the \u0026lt;code\u0026gt;CTRL \u002b D\u0026lt;\/code\u0026gt; option wont stop the container here. We need to stop the container by executing:\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;docker ps\n\ndocker stop \u0026lt;container-id\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;This will stop the container. Also if you want to remove the images you built, you can run the command:\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;docker image ls\n\ndocker rmi -f \u0026lt;image-id\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;So, we now have a image of our Django project, this image can be used by anyone inside a docker environment and thus creating much more easier to test\/work on a given project irrespective of the system is being used.\u0026lt;\/p\u0026gt;\n"
    }
    </script>
    
    
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/code-block.css">
    
    <link rel="icon" href="/tbicon.png" type="image/png">
    <link rel="apple-touch-icon" href="/tbicon.png">
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link id="syntax-theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.13.0/sql-wasm.js"></script>
    <link rel="stylesheet" href="/sql-playground.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/monokai.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/sql/sql.min.js"></script>
    <script src="/sql-playground.js"></script>
    
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const body = document.body;
        const stylesheet = document.getElementById("syntax-theme");
        const themeToggle = document.getElementById('theme-toggle');

        function setSyntaxTheme(theme) {
            if (theme === "secondary") {
                stylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css";
            } else {
                stylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css";
            }
        }

        
        document.querySelectorAll("pre code").forEach((block) => {
            hljs.highlightElement(block);
        });

        
        const currentTheme = localStorage.getItem("theme") || "default";
        if (currentTheme === "secondary") {
            body.classList.add("secondary-theme");
            if (themeToggle) themeToggle.checked = true;
        }
        setSyntaxTheme(currentTheme);

        
        if (themeToggle) {
            themeToggle.addEventListener('change', () => {
                const newTheme = themeToggle.checked ? 'secondary' : 'default';
                if (themeToggle.checked) {
                    body.classList.add('secondary-theme');
                } else {
                    body.classList.remove('secondary-theme');
                }
                localStorage.setItem('theme', newTheme);
                setSyntaxTheme(newTheme);
            });
        }
        
        
        const editBtn = document.getElementById('editor-edit');
        if (editBtn) {
            editBtn.addEventListener('click', async function () {
                const slug = "til\/dockerize-django-prj";
                const type = "til";
                console.log("Editing post:", slug, type);
                const url = "https:\/\/devmeetgor.netlify.app/.netlify/functions/api?slug=" + slug + "&method=edit&type=" + type;
                
                try {
                    const res = await fetch(url);
                    if (!res.ok) throw new Error("Failed to fetch edit content");
                    const html = await res.text();
                    document.querySelector('.post-content').innerHTML = html;
                } catch (err) {
                    console.error(err);
                    alert("Error loading editor content");
                }
            });
        }
    });
    </script>
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EET2ZX4QY1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-EET2ZX4QY1');
    </script>
</head>
<body>
    <header class="header">
  <a class="site-title" href="/" aria-label="Meet Gor - Home">Meet Gor</a>
  <nav>
    <ul>
      <li><a href="/" aria-label="Home">Home</a></li>
      <li><a href="/posts" aria-label="Posts">Posts</a></li>
      <li><a href="/about" aria-label="About">About</a></li>
      <li><a href="/contact" aria-label="Contact">Contact</a></li>
    </ul>
  </nav>
  <div class="theme-switch">
    <input type="checkbox" id="theme-toggle" aria-label="Toggle Theme">
    <label for="theme-toggle"></label>
  </div>
  
</header>
    
    <main class="container">
        <article class="blog-post">
            <h1>Dockerize a Django project</h1>
            
            <div class="post-meta">
                Published on 📅 <time datetime="2022-03-02">2022-03-02</time>
            </div>
            
            <div class="post-meta">
                Type: <a href="/til">til</a>
            </div>
            
            <div class="post-meta tags">
                <span class="post-series-label">🏷️ Tags:</span>
                
                <a href="/tags/django">#django</a>
                
                <a href="/tags/docker">#docker</a>
                
            </div>
            
            
            
            
            
            <hr>
            
            <div class="post-content">
                <h2 id="dockerize-a-django-project">Dockerize a Django project</h2>
<p>We can run our Django projects in a Docker Container by creating a Docker image for our project. It is really easy and intuitive to create a Dockerfile for any given application as it really is a matter of writing commands in a file and basically running it is a isolated environment. To create a Docker image, we first need a Dockerfile. A Dockerfile is simply a Blueprint to create a image in Docker. In this file we specify the instructions/commands/environment variables to create a image for our app to run.</p>
<h3 id="create-a-docker-file">Create a Docker File</h3>
<p>To create a dockerfile, simply create a file named as <code>Dockerfile</code> without any extension(not a .txt file). We need to then add the following code into the file.</p>
<div class="code-block"><div class="code-header"><span class="language-name">dockerfile</span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code class="language-dockerfile">FROM python:3.9-buster

ENV PYTHONUNBUFFERED=1

WORKDIR /code

COPY requirements.txt .

RUN pip install -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["python","manage.py","runserver","0.0.0.0:8000"]
</code></pre></div><ul>
<li>
<p>Let's see what are we doing here, first we are pulling a base image of Python in this case it is <a href="https://github.com/docker-library/python/blob/a4b368154b7e3c33c76385f1be7a998fcf3123eb/3.9/buster/Dockerfile">3.9-buster</a>, but it can be any of the <a href="https://hub.docker.com/_/python">Official Python images</a> from <a href="https://hub.docker.com">dockerhub</a>. It is simply a environment for our Django project to run. You can even use linux environments like ubuntu, debian or alpine.</p>
</li>
<li>
<p>Next we add a <code>PYTHONUNBUFFERED</code> as a environment variable and initialize it to <code>1</code>, which basically allows to parse python output straight into the terminal without actually buffering first.</p>
</li>
<li>
<p>We set the <code>WORKDIR</code> as the <code>code</code> directory, this sets the provided directory as the base to run any command or instructions in the Dockerfile.</p>
</li>
<li>
<p>We then <code>COPY</code> the <code>requirements.txt</code> file in the current(<code>.</code>) directory which is <code>code</code> as mentioned earlier. We simply want the <code>requirements.txt</code> file in the current directory so we can proceed with the next step which is to install the dependencies for the Django project</p>
</li>
<li>
<p>After copying the <code>requirements.txt</code> file, we simply install the packages mentioned int the file with <code>pip</code> we use the <code>RUN</code> command to execute any shell commands in the environment.</p>
</li>
<li>
<p>Next step is to <code>COPY</code> all the files from the current folder(local machine) into the docker environment image. So, we have the source code files in the Container.</p>
</li>
<li>
<p>Expose the port <code>8000</code>(default) or any other port you would want to run Django in the image. We use the expose command in complement to the <code>-p</code> argument when we want to create the container. I have explained the <a href="https://mr-destructive.github.io/techstructive-blog/docker-port-forward">port-forwarding</a> concept in the previous TIL.</p>
</li>
<li>
<p>Finally we can run the server. We need to parse every command as a comma separated string in the list to the <code>CMD</code> which the container actually executes the command when the image is build. So, all the commands previously were to build an image for the django project, the <code>CMD</code> will actually run the server in a container after building the image of the django project.</p>
</li>
</ul>
<h3 id="build-the-image">Build the image</h3>
<p>Using the Dockerfile, we can create the image for the Django project by a simple command.</p>
<div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>docker build . -t django-app
</code></pre></div><p>Assuming the Dockerfile is in the same folder from which you are running this command.</p>
<p><img src="https://res.cloudinary.com/techstructive-blog/image/upload/v1646230907/blog-media/jj04subyvkuvfb5obytu.png" alt="Build the django-app image"></p>
<p><img src="https://res.cloudinary.com/techstructive-blog/image/upload/v1646230988/blog-media/ugjoakqgyhiwelqkyaat.png" alt="Build Complete Success"></p>
<h3 id="run-the-image-and-create-a-container">Run the Image and Create a Container</h3>
<div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>docker run -p 8000:8000 django-app
</code></pre></div><p><img src="https://res.cloudinary.com/techstructive-blog/image/upload/v1646231023/blog-media/yneuz46burorz4b5vzp4.png" alt="Create Container"></p>
<p>You can use any port like <code>3000</code> or <code>4000</code> on your local system by changing the first port number as <code>3000:8000</code> and so on. So, the first port number is the local system's port number and the port number followed by a <code>:</code> is the port number for the environment inside the container of the django project. The container port is the same which we have <code>exposed</code> while creating the image. You can now go to <a href="127.0.0.1:8000">127.0.0.1:8000</a> or your chosen port in your local environment and see the django app running.</p>
<p>If you are using a Docker as a Virtual Machine, you need to find the IP-address of that Virtual-Machine(<code>docker-machine ip</code>) and use that instead of <code>localhost</code> or <code>127.0.0.1</code>.</p>
<h3 id="cleaning-the-container-for-iterations">Cleaning the Container for iterations</h3>
<p>We need to stop the container to run it again after making a few changes in the app if any. Simply pressing the <code>CTRL + D</code> option wont stop the container here. We need to stop the container by executing:</p>
<div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>docker ps

docker stop <container-id>
</code></pre></div><p>This will stop the container. Also if you want to remove the images you built, you can run the command:</p>
<div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>docker image ls

docker rmi -f <image-id>
</code></pre></div><p>So, we now have a image of our Django project, this image can be used by anyone inside a docker environment and thus creating much more easier to test/work on a given project irrespective of the system is being used.</p>

            </div>
        </article>
    </main>
    
    <div id="comments">
        <script src="https://giscus.app/client.js"
            data-repo="Mr-Destructive/meetgor.com"
            data-repo-id="R_kgDOHZ6V_g"
            data-category="Q&A"
            data-category-id="DIC_kwDOHZ6V_s4CRfn4"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="dark_high_contrast"
            data-lang="en"
            crossorigin="anonymous"
            async>
        </script>
    </div>
    
    <footer class="site-footer" role="contentinfo">
  <div class="footer-content">
    <p>&copy; Meet Gor. All rights reserved.</p>
    <div class="social-links">
      <a href="/contact" aria-label="Connect with me">Connect with me</a>
    </div>
  </div>
</footer>
    
</body>
</html>
