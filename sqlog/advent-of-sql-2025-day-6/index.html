<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>Advent of SQL 2025 Day 6: Days of Delight | Meet Gor</title>
    <meta name="title" content="Advent of SQL 2025 Day 6: Days of Delight | Meet Gor">
    <meta name="description" content="">
    <meta name="author" content="Meet Gor">
    <meta name="keywords" content="sqlite, sql, advent-of-sql">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://meetgor.com/sqlog/advent-of-sql-2025-day-6">
    
    
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://meetgor.com/sqlog/advent-of-sql-2025-day-6">
    <meta property="og:title" content="Advent of SQL 2025 Day 6: Days of Delight">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://meetgor.com/tbicon.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Advent of SQL 2025 Day 6: Days of Delight">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Meet Gor">
    <meta property="article:published_time" content="2025-12-21 15:30 &#43;0530">
    <meta property="article:modified_time" content="2025-12-21 15:30 &#43;0530">
    <meta property="article:author" content="Meet Gor">
    
    <meta property="article:tag" content="sqlite">
    
    <meta property="article:tag" content="sql">
    
    <meta property="article:tag" content="advent-of-sql">
    
    
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@meetgor711">
    <meta name="twitter:creator" content="@meetgor711">
    <meta name="twitter:url" content="https://meetgor.com/sqlog/advent-of-sql-2025-day-6">
    <meta name="twitter:title" content="Advent of SQL 2025 Day 6: Days of Delight">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="https://meetgor.com/tbicon.png">
    <meta name="twitter:image:alt" content="Advent of SQL 2025 Day 6: Days of Delight">
    
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/meetgor.com/sqlog\/advent-of-sql-2025-day-6"
        },
        "headline": "Advent of SQL 2025 Day 6: Days of Delight",
        "description": "",
        "datePublished": "2025-12-21 15:30 \u002b0530",
        "dateModified": "2025-12-21 15:30 \u002b0530",
        "author": {
            "@type": "Person",
            "name": "Meet Gor"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Meet Gor",
            "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/meetgor.com/tbicon.png"
            }
        },
        
        "keywords": "sqlite, sql, advent-of-sql",
        "articleBody": "\u0026lt;h2 id=\u0026#34;advent-of-sql-day-6-days-of-delight\u0026#34;\u0026gt;Advent of SQL Day 6: Days of Delight\u0026lt;\/h2\u0026gt;\n\u0026lt;p\u0026gt;It is day 6 of advent of SQL.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026#39;s jump straight into the sql for the day.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;DROP TABLE IF EXISTS families;\nDROP TABLE IF EXISTS deliveries_assigned;\n\nCREATE TABLE families (\n    id INT PRIMARY KEY,\n    family_name TEXT\n);\n\nCREATE TABLE deliveries_assigned (\n    id INT PRIMARY KEY,\n    family_id INT,\n    gift_date DATE,\n    gift_name TEXT\n);\n\nINSERT INTO families (id, family_name) VALUES\n    (1, \u0026#39;Isla Martinez\u0026#39;),\n    (2, \u0026#39;Nolan Garcia\u0026#39;),\n    (3, \u0026#39;Yara Chen\u0026#39;),\n    (4, \u0026#39;Tariq Nguyen\u0026#39;),\n    (5, \u0026#39;Mila Hernandez\u0026#39;),\n    (6, \u0026#39;Casey Kim\u0026#39;),\n    (7, \u0026#39;Mateo Hernandez\u0026#39;),\n    (8, \u0026#39;Keiko Petrov\u0026#39;),\n    (9, \u0026#39;Ethan Flores\u0026#39;),\n    (10, \u0026#39;Mateo Nakamura\u0026#39;),\n    (11, \u0026#39;Maya Fernandez\u0026#39;),\n    (12, \u0026#39;Mila Davis\u0026#39;),\n    (13, \u0026#39;Yara Rossi\u0026#39;),\n    (14, \u0026#39;Nolan Phillips\u0026#39;),\n    (15, \u0026#39;Amina Perez\u0026#39;);\n\nINSERT INTO deliveries_assigned (id, family_id, gift_date, gift_name) VALUES\n    (1, 1, \u0026#39;2025-12-01\u0026#39;, \u0026#39;roasted cashews\u0026#39;),\n    (2, 1, \u0026#39;2025-12-02\u0026#39;, \u0026#39;cookie decorating kit\u0026#39;),\n    (3, 1, \u0026#39;2025-12-03\u0026#39;, \u0026#39;dark chocolate assortment\u0026#39;),\n    (4, 1, \u0026#39;2025-12-04\u0026#39;, \u0026#39;white chocolate candies\u0026#39;),\n    (5, 1, \u0026#39;2025-12-05\u0026#39;, \u0026#39;reindeer headband\u0026#39;),\n    (6, 1, \u0026#39;2025-12-06\u0026#39;, \u0026#39;holiday brownie bites\u0026#39;),\n    (7, 1, \u0026#39;2025-12-07\u0026#39;, \u0026#39;shortbread cookie tin\u0026#39;),\n    (8, 1, \u0026#39;2025-12-08\u0026#39;, \u0026#39;chocolate chip cookies\u0026#39;),\n    (9, 1, \u0026#39;2025-12-11\u0026#39;, \u0026#39;holiday jam trio\u0026#39;),\n    (10, 1, \u0026#39;2025-12-12\u0026#39;, \u0026#39;white chocolate popcorn\u0026#39;),\n    (11, 1, \u0026#39;2025-12-14\u0026#39;, \u0026#39;holiday jam trio\u0026#39;),\n    (12, 1, \u0026#39;2025-12-15\u0026#39;, \u0026#39;fudge bites\u0026#39;),\n    (13, 1, \u0026#39;2025-12-16\u0026#39;, \u0026#39;holiday sticker sheet\u0026#39;),\n    (14, 1, \u0026#39;2025-12-18\u0026#39;, \u0026#39;hot cocoa bombs\u0026#39;),\n    (15, 1, \u0026#39;2025-12-19\u0026#39;, \u0026#39;honey roasted nuts\u0026#39;),\n    (16, 1, \u0026#39;2025-12-20\u0026#39;, \u0026#39;holiday mug\u0026#39;),\n    (17, 1, \u0026#39;2025-12-21\u0026#39;, \u0026#39;white chocolate candies\u0026#39;),\n    (18, 1, \u0026#39;2025-12-22\u0026#39;, \u0026#39;puzzle book\u0026#39;),\n    (19, 1, \u0026#39;2025-12-23\u0026#39;, \u0026#39;snowman plush\u0026#39;),\n    (20, 1, \u0026#39;2025-12-24\u0026#39;, \u0026#39;scented hand cream\u0026#39;),\n    (21, 1, \u0026#39;2025-12-25\u0026#39;, \u0026#39;vanilla bean wafers\u0026#39;),\n    (22, 2, \u0026#39;2025-12-01\u0026#39;, \u0026#39;roasted cashews\u0026#39;),\n    (23, 2, \u0026#39;2025-12-02\u0026#39;, \u0026#39;holiday brownie bites\u0026#39;),\n    (24, 2, \u0026#39;2025-12-03\u0026#39;, \u0026#39;peppermint bark bites\u0026#39;),\n    (25, 2, \u0026#39;2025-12-04\u0026#39;, \u0026#39;holiday jam trio\u0026#39;),\n    (26, 2, \u0026#39;2025-12-05\u0026#39;, \u0026#39;festive notepad\u0026#39;),\n    (27, 2, \u0026#39;2025-12-06\u0026#39;, \u0026#39;scented pine sachet\u0026#39;),\n    (28, 2, \u0026#39;2025-12-07\u0026#39;, \u0026#39;holiday mug\u0026#39;),\n    (29, 2, \u0026#39;2025-12-08\u0026#39;, \u0026#39;shortbread cookie tin\u0026#39;),\n    (30, 2, \u0026#39;2025-12-09\u0026#39;, \u0026#39;dark chocolate assortment\u0026#39;);\n\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;So, we have two tables:\u0026lt;\/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;families\u0026lt;\/code\u0026gt; table\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table\u0026lt;\/li\u0026gt;\n\u0026lt;\/ol\u0026gt;\n\u0026lt;p\u0026gt;The first table, \u0026lt;code\u0026gt;family\u0026lt;\/code\u0026gt; just has the id and the name of the family.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;The second table, \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; has the id, family id, gift date, and gift name.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026#39;s look at the problem statement.\u0026lt;\/p\u0026gt;\n\u0026lt;h2 id=\u0026#34;problem\u0026#34;\u0026gt;Problem\u0026lt;\/h2\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Generate a report that returns the dates and families that have no delivery assigned after December 14th, using the \u0026lt;code\u0026gt;families\u0026lt;\/code\u0026gt; and \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt;.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Each row in the report should be a date and family name that represents the dates in which families don\u0026#39;t have a delivery assigned yet.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Label the columns as \u0026lt;code\u0026gt;unassigned_date\u0026lt;\/code\u0026gt; and \u0026lt;code\u0026gt;name\u0026lt;\/code\u0026gt;. Order the results by \u0026lt;code\u0026gt;unassigned_date\u0026lt;\/code\u0026gt; and \u0026lt;code\u0026gt;name\u0026lt;\/code\u0026gt;, respectively, both in ascending order.\u0026lt;\/p\u0026gt;\n\u0026lt;\/blockquote\u0026gt;\n\u0026lt;p\u0026gt;Ok, so we need to list the deliveries_assigned for each family first, to check what kind of pattern are we looking for.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;SELECT * FROM deliveries_assigned WHERE family_id = 1;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;sqlite\u0026gt; select * from deliveries_assigned where family_id=1;\n\u002b----\u002b-----------\u002b------------\u002b---------------------------\u002b\n| id | family_id | gift_date  |         gift_name         |\n\u002b----\u002b-----------\u002b------------\u002b---------------------------\u002b\n| 1  | 1         | 2025-12-01 | roasted cashews           |\n| 2  | 1         | 2025-12-02 | cookie decorating kit     |\n| 3  | 1         | 2025-12-03 | dark chocolate assortment |\n| 4  | 1         | 2025-12-04 | white chocolate candies   |\n| 5  | 1         | 2025-12-05 | reindeer headband         |\n| 6  | 1         | 2025-12-06 | holiday brownie bites     |\n| 7  | 1         | 2025-12-07 | shortbread cookie tin     |\n| 8  | 1         | 2025-12-08 | chocolate chip cookies    |\n| 9  | 1         | 2025-12-11 | holiday jam trio          |\n| 10 | 1         | 2025-12-12 | white chocolate popcorn   |\n| 11 | 1         | 2025-12-14 | holiday jam trio          |\n| 12 | 1         | 2025-12-15 | fudge bites               |\n| 13 | 1         | 2025-12-16 | holiday sticker sheet     |\n| 14 | 1         | 2025-12-18 | hot cocoa bombs           |\n| 15 | 1         | 2025-12-19 | honey roasted nuts        |\n| 16 | 1         | 2025-12-20 | holiday mug               |\n| 17 | 1         | 2025-12-21 | white chocolate candies   |\n| 18 | 1         | 2025-12-22 | puzzle book               |\n| 19 | 1         | 2025-12-23 | snowman plush             |\n| 20 | 1         | 2025-12-24 | scented hand cream        |\n| 21 | 1         | 2025-12-25 | vanilla bean wafers       |\n\u002b----\u002b-----------\u002b------------\u002b---------------------------\u002b\nsqlite\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;So, we are missing gifts for family id \u0026lt;code\u0026gt;1\u0026lt;\/code\u0026gt; on \u0026lt;code\u0026gt;09\u0026lt;\/code\u0026gt;, \u0026lt;code\u0026gt;10\u0026lt;\/code\u0026gt;, \u0026lt;code\u0026gt;13\u0026lt;\/code\u0026gt;, and \u0026lt;code\u0026gt;17\u0026lt;\/code\u0026gt;. But we are only asked for gifts after \u0026lt;code\u0026gt;14\u0026lt;\/code\u0026gt; (December 14th).\u0026lt;\/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Generate a report that returns the dates and families that have \u0026lt;strong\u0026gt;no delivery assigned after December 14th\u0026lt;\/strong\u0026gt;, using the families and deliveries_assigned.\u0026lt;\/p\u0026gt;\n\u0026lt;\/blockquote\u0026gt;\n\u0026lt;p\u0026gt;So, we can discard \u0026lt;code\u0026gt;09\u0026lt;\/code\u0026gt;, \u0026lt;code\u0026gt;10\u0026lt;\/code\u0026gt;, and \u0026lt;code\u0026gt;13\u0026lt;\/code\u0026gt; as they are before December 14th.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;SELECT * FROM deliveries_assigned WHERE family_id = 1 AND gift_date \u0026gt; \u0026#39;2025-12-14\u0026#39;;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;It gives the right dates where the gifts are assigned after December 14th. But the problem is we need to get dates which are missing in this \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table record for each family.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Finding something missing is kind of wired, because you don\u0026#39;t have what is missing. Especially for dates, like dates are very painful.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;We need to find among the sequential order of the dates, when some of the dates are missing, that is simple here, but you can see it could be quite cubersome if we have to manually add each date in the list for comparing with.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;joins-with-not-exists\u0026#34;\u0026gt;JOINs with NOT EXISTS\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;So, the basic dirty solution is to check the missing dates for each family, one by one.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;SELECT \n    families.family_name AS name,\n    dates.column1 AS unassigned_date\nFROM families\nJOIN (\n    VALUES \n        (\u0026#39;2025-12-15\u0026#39;), (\u0026#39;2025-12-16\u0026#39;), (\u0026#39;2025-12-17\u0026#39;),\n        (\u0026#39;2025-12-18\u0026#39;), (\u0026#39;2025-12-19\u0026#39;), (\u0026#39;2025-12-20\u0026#39;),\n        (\u0026#39;2025-12-21\u0026#39;), (\u0026#39;2025-12-22\u0026#39;), (\u0026#39;2025-12-23\u0026#39;),\n        (\u0026#39;2025-12-24\u0026#39;), (\u0026#39;2025-12-25\u0026#39;)\n) AS dates ON 1=1\nWHERE NOT EXISTS (\n    SELECT 1 \n    FROM deliveries_assigned\n    WHERE deliveries_assigned.family_id = families.id \n    AND deliveries_assigned.gift_date = dates.column1\n)\nORDER BY unassigned_date, name;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;Let\u0026#39;s break it down:\u0026lt;\/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;We have a \u0026lt;code\u0026gt;families\u0026lt;\/code\u0026gt; table with id and family name.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;We have a \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table with id, family id, gift date, and gift name.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;We create a list of dates from \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt; to \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt; using the \u0026lt;code\u0026gt;VALUES\u0026lt;\/code\u0026gt; keyword.\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;This just appends one date after other and names the columns as \u0026lt;code\u0026gt;column1\u0026lt;\/code\u0026gt; with the table as \u0026lt;code\u0026gt;dates\u0026lt;\/code\u0026gt;.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;The \u0026lt;code\u0026gt;ON\u0026lt;\/code\u0026gt; condition is \u0026lt;code\u0026gt;1=1\u0026lt;\/code\u0026gt; to make sure the \u0026lt;code\u0026gt;WHERE\u0026lt;\/code\u0026gt; condition is true for the JOIN to happen.\u0026lt;\/li\u0026gt;\n\u0026lt;\/ul\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;We use the \u0026lt;code\u0026gt;NOT EXISTS\u0026lt;\/code\u0026gt; keyword to check if the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table has a record for each date in the list.\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;we use \u0026lt;code\u0026gt;NOT EXISTS\u0026lt;\/code\u0026gt; because we want to check if there is no date for each date in the assigned list.\u0026lt;\/li\u0026gt;\n\u0026lt;\/ul\u0026gt;\n\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;We order the results by \u0026lt;code\u0026gt;unassigned_date\u0026lt;\/code\u0026gt; and \u0026lt;code\u0026gt;name\u0026lt;\/code\u0026gt;, respectively, both in ascending order.\u0026lt;\/li\u0026gt;\n\u0026lt;\/ol\u0026gt;\n\u0026lt;p\u0026gt;So, that is not the best way to solve this, I think.\u0026lt;\/p\u0026gt;\n\u0026lt;h3 id=\u0026#34;recursive-ctes\u0026#34;\u0026gt;Recursive CTEs\u0026lt;\/h3\u0026gt;\n\u0026lt;p\u0026gt;We can generate a table full of dates, and then cross join the table with the \u0026lt;code\u0026gt;families\u0026lt;\/code\u0026gt; table. This will give us all possible combinations of dates and families like the gift should ideally be there for each family from 1st to 25th of December(however we are only interested from 15th to 25th December). Then once we have that full table of combination, we can check from the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table and inner join for each family and filter out the rows which have family_id as \u0026lt;code\u0026gt;NULL\u0026lt;\/code\u0026gt; because some dates will be missing for that family.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;First we\u0026#39;ll create a recursive table of dates from \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt; to \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt;\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n)\nSELECT * FROM dates;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;This will give us the dates from \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt; to \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt; in a recursive table.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;What is a recursive table?\u0026lt;\/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;A recursive table is a table that is defined as a combination of itself.\u0026lt;\/p\u0026gt;\n\u0026lt;\/blockquote\u0026gt;\n\u0026lt;p\u0026gt;So, we can create a recursive table of dates from \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt; to \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt;, The base case is \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt;, and the recursive case is \u0026lt;code\u0026gt;SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;) FROM dates WHERE gift_date \u0026amp;lt; \u0026#39;2025-12-25\u0026#39;\u0026lt;\/code\u0026gt; which means it will call it recursively for \u0026lt;code\u0026gt;2025-12-16\u0026lt;\/code\u0026gt; on the first call inside it because of \u0026lt;code\u0026gt;\u002b1 day\u0026lt;\/code\u0026gt; as the interval in the \u0026lt;code\u0026gt;date\u0026lt;\/code\u0026gt; function.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;The date function is a \u0026lt;a href=\u0026#34;https:\/\/sqlite.org\/lang_datefunc.html#modifiers\u0026#34;\u0026gt;function\u0026lt;\/a\u0026gt; which takes in a date and we can add modifiers to it to manipulate or extract parts of the date. Here we have added the modifier as \u0026lt;code\u0026gt;\u002b1 day\u0026lt;\/code\u0026gt; which will increment the day by one. We then call that in the \u0026lt;code\u0026gt;dates\u0026lt;\/code\u0026gt; CTE again till we have the \u0026lt;code\u0026gt;date\u0026lt;\/code\u0026gt; as less then \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt;. Till then we will have created all the \u0026lt;code\u0026gt;dates\u0026lt;\/code\u0026gt; from \u0026lt;code\u0026gt;15\u0026lt;\/code\u0026gt; till \u0026lt;code\u0026gt;25\u0026lt;\/code\u0026gt; including \u0026lt;code\u0026gt;25\u0026lt;\/code\u0026gt;. We can just type in the values manually as we did in the first dirty solution, but I wanted to see how we can generate dates dynamically in sqlite.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;sqlite\u0026gt; WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n)\nSELECT * FROM dates;\n\u002b------------\u002b\n| gift_date  |\n\u002b------------\u002b\n| 2025-12-15 |\n| 2025-12-16 |\n| 2025-12-17 |\n| 2025-12-18 |\n| 2025-12-19 |\n| 2025-12-20 |\n| 2025-12-21 |\n| 2025-12-22 |\n| 2025-12-23 |\n| 2025-12-24 |\n| 2025-12-25 |\n\u002b------------\u002b\nRun Time: real 0.000 user 0.000225 sys 0.000009\nsqlite\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;Now we\u0026#39;ll cross join the \u0026lt;code\u0026gt;families\u0026lt;\/code\u0026gt; table with the \u0026lt;code\u0026gt;dates\u0026lt;\/code\u0026gt; table.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\nFROM families\nCROSS JOIN dates;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;OK! Wait include the \u0026lt;code\u0026gt;dates\u0026lt;\/code\u0026gt; CTE above too, was just simplifying the query.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n)\nSELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\nFROM families\nCROSS JOIN dates;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;This will give us the full table of combination of dates and families.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;SELECT COUNT(*) FROM families;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;sqlite\u0026gt; SELECT COUNT(*) FROM families;\n\u002b----------\u002b\n| COUNT(*) |\n\u002b----------\u002b\n| 250      |\n\u002b----------\u002b\nRun Time: real 0.000 user 0.000113 sys 0.000006\nsqlite\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;That is :\u0026lt;\/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;There are 11 dates right? \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt; to \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt;, -\u0026amp;gt; \u0026lt;code\u0026gt;15\u0026lt;\/code\u0026gt; (1), \u0026lt;code\u0026gt;16\u0026lt;\/code\u0026gt; (2), \u0026lt;code\u0026gt;17\u0026lt;\/code\u0026gt; (3), \u0026lt;code\u0026gt;18\u0026lt;\/code\u0026gt; (4), \u0026lt;code\u0026gt;19\u0026lt;\/code\u0026gt; (5), \u0026lt;code\u0026gt;20\u0026lt;\/code\u0026gt; (6), \u0026lt;code\u0026gt;21\u0026lt;\/code\u0026gt; (7), \u0026lt;code\u0026gt;22\u0026lt;\/code\u0026gt; (8), \u0026lt;code\u0026gt;23\u0026lt;\/code\u0026gt; (9), \u0026lt;code\u0026gt;24\u0026lt;\/code\u0026gt; (10), \u0026lt;code\u0026gt;25\u0026lt;\/code\u0026gt; (11)\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;There are I think \u0026lt;code\u0026gt;250\u0026lt;\/code\u0026gt; families.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;So, a \u0026lt;code\u0026gt;CROSS JOIN\u0026lt;\/code\u0026gt; will give us \u0026lt;code\u0026gt;11 * 250 = 2750\u0026lt;\/code\u0026gt; rows.\u0026lt;\/li\u0026gt;\n\u0026lt;\/ul\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;SELECT COUNT(*) FROM (WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n)\nSELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\nFROM families\nCROSS JOIN dates) as count;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;11 dates for each family.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;sqlite\u0026gt; SELECT COUNT(*) FROM (WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n)\nSELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\nFROM families\nCROSS JOIN dates) as count;\n\u002b----------\u002b\n| COUNT(*) |\n\u002b----------\u002b\n| 2750     |\n\u002b----------\u002b\nRun Time: real 0.001 user 0.000407 sys 0.000000\nsqlite\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;Now, we simply have to join the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table with the above table.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Why?\nBecause we need to map which dates are assigned and which dates are missing.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;We need to do a which join?\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;LEFT, RIGHT or INNER\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;LEFT\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;WHy?\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Because, the left table will have all the dates, and the right table will have the assigned dates. \u0026lt;strong\u0026gt;We need all the records from the \u0026lt;code\u0026gt;left\u0026lt;\/code\u0026gt; table (the combination, cross join table)\u0026lt;\/strong\u0026gt;\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;We need all the rows in the \u0026lt;code\u0026gt;left\u0026lt;\/code\u0026gt; or the combination(cross join) of date and family table as to map which dates are assigned and which dates are missing.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;If the \u0026lt;code\u0026gt;left\u0026lt;\/code\u0026gt; table has a record, then it means the date is assigned. If the \u0026lt;code\u0026gt;right\u0026lt;\/code\u0026gt; table has a record i.e. the gift is assigned, then it means the date is not assigned.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Hence, we can simply then filter out the relations with \u0026lt;code\u0026gt;NULL\u0026lt;\/code\u0026gt; as the \u0026lt;code\u0026gt;family_id\u0026lt;\/code\u0026gt; in the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n),\ncombination AS (\n    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\n    FROM families\n    CROSS JOIN dates\n)\nSELECT\n    *\nFROM combination\nLEFT JOIN deliveries_assigned\n    ON deliveries_assigned.family_id = combination.family_id\n    AND deliveries_assigned.gift_date = combination.gift_date\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;sqlite\u0026gt; WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n),\ncombination AS (\n    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\n    FROM families\n    CROSS JOIN dates\n)\nSELECT\n    *\nFROM combination\nLEFT JOIN deliveries_assigned\n    ON deliveries_assigned.family_id = combination.family_id\n    AND deliveries_assigned.gift_date = combination.gift_date LIMIT 30;\n\u002b-----------\u002b---------------\u002b------------\u002b----\u002b-----------\u002b------------\u002b-------------------------\u002b\n| family_id |  family_name  | gift_date  | id | family_id | gift_date  |        gift_name        |\n\u002b-----------\u002b---------------\u002b------------\u002b----\u002b-----------\u002b------------\u002b-------------------------\u002b\n| 1         | Isla Martinez | 2025-12-15 | 12 | 1         | 2025-12-15 | fudge bites             |\n| 1         | Isla Martinez | 2025-12-16 | 13 | 1         | 2025-12-16 | holiday sticker sheet   |\n| 1         | Isla Martinez | 2025-12-17 |    |           |            |                         |\n| 1         | Isla Martinez | 2025-12-18 | 14 | 1         | 2025-12-18 | hot cocoa bombs         |\n| 1         | Isla Martinez | 2025-12-19 | 15 | 1         | 2025-12-19 | honey roasted nuts      |\n| 1         | Isla Martinez | 2025-12-20 | 16 | 1         | 2025-12-20 | holiday mug             |\n| 1         | Isla Martinez | 2025-12-21 | 17 | 1         | 2025-12-21 | white chocolate candies |\n| 1         | Isla Martinez | 2025-12-22 | 18 | 1         | 2025-12-22 | puzzle book             |\n| 1         | Isla Martinez | 2025-12-23 | 19 | 1         | 2025-12-23 | snowman plush           |\n| 1         | Isla Martinez | 2025-12-24 | 20 | 1         | 2025-12-24 | scented hand cream      |\n| 1         | Isla Martinez | 2025-12-25 | 21 | 1         | 2025-12-25 | vanilla bean wafers     |\n| 2         | Nolan Garcia  | 2025-12-15 | 36 | 2         | 2025-12-15 | mini marshmallow tubes  |\n| 2         | Nolan Garcia  | 2025-12-16 | 37 | 2         | 2025-12-16 | white chocolate candies |\n| 2         | Nolan Garcia  | 2025-12-17 | 38 | 2         | 2025-12-17 | gingerbread cookie kit  |\n| 2         | Nolan Garcia  | 2025-12-18 | 39 | 2         | 2025-12-18 | family card game        |\n| 2         | Nolan Garcia  | 2025-12-19 |    |           |            |                         |\n| 2         | Nolan Garcia  | 2025-12-20 | 40 | 2         | 2025-12-20 | santa hat               |\n| 2         | Nolan Garcia  | 2025-12-21 | 41 | 2         | 2025-12-21 | holiday sticker sheet   |\n| 2         | Nolan Garcia  | 2025-12-22 |    |           |            |                         |\n| 2         | Nolan Garcia  | 2025-12-23 | 42 | 2         | 2025-12-23 | pecan praline bites     |\n| 2         | Nolan Garcia  | 2025-12-24 |    |           |            |                         |\n| 2         | Nolan Garcia  | 2025-12-25 | 43 | 2         | 2025-12-25 | santa hat               |\n| 3         | Yara Chen     | 2025-12-15 | 57 | 3         | 2025-12-15 | peppermint bark bites   |\n| 3         | Yara Chen     | 2025-12-16 |    |           |            |                         |\n| 3         | Yara Chen     | 2025-12-17 |    |           |            |                         |\n| 3         | Yara Chen     | 2025-12-18 | 58 | 3         | 2025-12-18 | cheddar popcorn         |\n| 3         | Yara Chen     | 2025-12-19 |    |           |            |                         |\n| 3         | Yara Chen     | 2025-12-20 | 59 | 3         | 2025-12-20 | festive notepad         |\n| 3         | Yara Chen     | 2025-12-21 | 60 | 3         | 2025-12-21 | fruit assortment        |\n| 3         | Yara Chen     | 2025-12-22 |    |           |            |                         |\n\u002b-----------\u002b---------------\u002b------------\u002b----\u002b-----------\u002b------------\u002b-------------------------\u002b\n...\n...\n| 249       | Jude Bautista     | 2025-12-24 |      |           |            |                            |\n| 249       | Jude Bautista     | 2025-12-25 | 5073 | 249       | 2025-12-25 | almond brittle             |\n| 250       | Bianca Muller     | 2025-12-15 | 5086 | 250       | 2025-12-15 | cocoa mix bundle           |\n| 250       | Bianca Muller     | 2025-12-16 | 5087 | 250       | 2025-12-16 | cookie decorating kit      |\n| 250       | Bianca Muller     | 2025-12-17 | 5088 | 250       | 2025-12-17 | shortbread cookie tin      |\n| 250       | Bianca Muller     | 2025-12-18 |      |           |            |                            |\n| 250       | Bianca Muller     | 2025-12-19 | 5089 | 250       | 2025-12-19 | snowflake candle           |\n| 250       | Bianca Muller     | 2025-12-20 |      |           |            |                            |\n| 250       | Bianca Muller     | 2025-12-21 | 5090 | 250       | 2025-12-21 | trail mix trio             |\n| 250       | Bianca Muller     | 2025-12-22 | 5091 | 250       | 2025-12-22 | shortbread cookie tin      |\n| 250       | Bianca Muller     | 2025-12-23 |      |           |            |                            |\n| 250       | Bianca Muller     | 2025-12-24 |      |           |            |                            |\n| 250       | Bianca Muller     | 2025-12-25 | 5092 | 250       | 2025-12-25 | gingerbread cookie kit     |\n\u002b-----------\u002b-------------------\u002b------------\u002b------\u002b-----------\u002b------------\u002b----------------------------\u002b\nRun Time: real 0.028 user 0.013392 sys 0.013096\nsqlite\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;This will give all the gifts that have been assigned as well as not assigned for each family on each date from \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt; to \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt;.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;Now, you can see, what we need and what we don\u0026#39;t we simply can get the gifts or records with the \u0026lt;code\u0026gt;family_id\u0026lt;\/code\u0026gt; in the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table as \u0026lt;code\u0026gt;NULL\u0026lt;\/code\u0026gt;, since there was no record for the family_id in the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table for that date.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n),\ncombination AS (\n    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\n    FROM families\n    CROSS JOIN dates\n)\nSELECT\n    *\nFROM combination\nLEFT JOIN deliveries_assigned\n    ON deliveries_assigned.family_id = combination.family_id\n    AND deliveries_assigned.gift_date = combination.gift_date\nWHERE deliveries_assigned.family_id IS NULL\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;So, a simple \u0026lt;code\u0026gt;WHERE\u0026lt;\/code\u0026gt; clause with deliveries_assigned.family_id \u0026lt;code\u0026gt;IS NULL\u0026lt;\/code\u0026gt; will give us the missing dates for each family.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;sqlite\u0026gt; WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n),\ncombination AS (\n    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\n    FROM families\n    CROSS JOIN dates\n)\nSELECT\n    *\nFROM combination\nLEFT JOIN deliveries_assigned\n    ON deliveries_assigned.family_id = combination.family_id\n    AND deliveries_assigned.gift_date = combination.gift_date\nWHERE deliveries_assigned.family_id IS NULL\n   ...\u0026gt; ;\n\u002b-----------\u002b-------------------\u002b------------\u002b----\u002b-----------\u002b-----------\u002b-----------\u002b\n| family_id |    family_name    | gift_date  | id | family_id | gift_date | gift_name |\n\u002b-----------\u002b-------------------\u002b------------\u002b----\u002b-----------\u002b-----------\u002b-----------\u002b\n| 1         | Isla Martinez     | 2025-12-17 |    |           |           |           |\n| 2         | Nolan Garcia      | 2025-12-19 |    |           |           |           |\n| 2         | Nolan Garcia      | 2025-12-22 |    |           |           |           |\n| 2         | Nolan Garcia      | 2025-12-24 |    |           |           |           |\n| 3         | Yara Chen         | 2025-12-16 |    |           |           |           |\n| 3         | Yara Chen         | 2025-12-17 |    |           |           |           |\n| 3         | Yara Chen         | 2025-12-19 |    |           |           |           |\n| 3         | Yara Chen         | 2025-12-22 |    |           |           |           |\n| 4         | Tariq Nguyen      | 2025-12-16 |    |           |           |           |\n...\n...\n| 247       | Malik Kim         | 2025-12-18 |    |           |           |           |\n| 247       | Malik Kim         | 2025-12-20 |    |           |           |           |\n| 247       | Malik Kim         | 2025-12-21 |    |           |           |           |\n| 248       | Tariq Flores      | 2025-12-16 |    |           |           |           |\n| 248       | Tariq Flores      | 2025-12-17 |    |           |           |           |\n| 248       | Tariq Flores      | 2025-12-18 |    |           |           |           |\n| 249       | Jude Bautista     | 2025-12-16 |    |           |           |           |\n| 249       | Jude Bautista     | 2025-12-20 |    |           |           |           |\n| 249       | Jude Bautista     | 2025-12-21 |    |           |           |           |\n| 249       | Jude Bautista     | 2025-12-23 |    |           |           |           |\n| 249       | Jude Bautista     | 2025-12-24 |    |           |           |           |\n| 250       | Bianca Muller     | 2025-12-18 |    |           |           |           |\n| 250       | Bianca Muller     | 2025-12-20 |    |           |           |           |\n| 250       | Bianca Muller     | 2025-12-23 |    |           |           |           |\n| 250       | Bianca Muller     | 2025-12-24 |    |           |           |           |\n\u002b-----------\u002b-------------------\u002b------------\u002b----\u002b-----------\u002b-----------\u002b-----------\u002b\nRun Time: real 0.014 user 0.011508 sys 0.002046\nsqlite\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;All right, we now need to order by \u0026lt;code\u0026gt;unassigned_date\u0026lt;\/code\u0026gt; and \u0026lt;code\u0026gt;name\u0026lt;\/code\u0026gt; which are the \u0026lt;code\u0026gt;dates\u0026lt;\/code\u0026gt; from the \u0026lt;code\u0026gt;combination\u0026lt;\/code\u0026gt; table and the \u0026lt;code\u0026gt;family_name\u0026lt;\/code\u0026gt; from the \u0026lt;code\u0026gt;families\u0026lt;\/code\u0026gt; table.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n),\ncombination AS (\n    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\n    FROM families\n    CROSS JOIN dates\n)\nSELECT\n    combination.gift_date as unassigned_date,\n    family_name\nFROM combination\nLEFT JOIN deliveries_assigned\n    ON deliveries_assigned.family_id = combination.family_id\n    AND deliveries_assigned.gift_date = combination.gift_date\nWHERE deliveries_assigned.family_id IS NULL\nORDER BY unassigned_date, family_name;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;div class=\u0026#34;code-block\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;code-header\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;language-name\u0026#34;\u0026gt;\u0026lt;\/span\u0026gt;\u0026lt;button class=\u0026#34;copy-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-copy\u0026#34;\u0026gt;\u0026lt;rect x=\u0026#34;9\u0026#34; y=\u0026#34;9\u0026#34; width=\u0026#34;13\u0026#34; height=\u0026#34;13\u0026#34; rx=\u0026#34;2\u0026#34; ry=\u0026#34;2\u0026#34;\u0026gt;\u0026lt;\/rect\u0026gt;\u0026lt;path d=\u0026#34;M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;\u002b-----------------\u002b-------------------\u002b\n| unassigned_date |    family_name    |\n\u002b-----------------\u002b-------------------\u002b\n| 2025-12-15      | Adil Rossi        |\n| 2025-12-15      | Aisha Connor      |\n| 2025-12-15      | Amina Perez       |\n| 2025-12-15      | Amina Wong        |\n| 2025-12-15      | Andre Flores      |\n| 2025-12-15      | Anya Singh        |\n| 2025-12-15      | Arjun Wong        |\n| 2025-12-15      | Bianca Connor     |\n| 2025-12-15      | Caleb Petrov      |\n| 2025-12-15      | Caleb Roberts     |\n| 2025-12-15      | Carmen Carter     |\n| 2025-12-15      | Carmen Garcia     |\n| 2025-12-15      | Casey Flores      |\n| 2025-12-15      | Chi Hughes        |\n| 2025-12-15      | Clara Johnson     |\n| 2025-12-15      | Dara Bautista     |\n| 2025-12-15      | David Ramirez     |\n| 2025-12-15      | Elias Petrov      |\n| 2025-12-15      | Elias Petrov      |\n| 2025-12-15      | Ethan Flores      |\n| 2025-12-15      | Eva Gonzalez      |\n...\n...\n| 2025-12-25      | Owen Park         |\n| 2025-12-25      | Priya Khan        |\n| 2025-12-25      | Rafael Singh      |\n| 2025-12-25      | Ravi Abdallah     |\n| 2025-12-25      | Ravi Mitchell     |\n| 2025-12-25      | Rosa Turner       |\n| 2025-12-25      | Sara Jensen       |\n| 2025-12-25      | Sara Lopez        |\n| 2025-12-25      | Sara Rossi        |\n| 2025-12-25      | Sarah Phillips    |\n| 2025-12-25      | Seth Garcia       |\n| 2025-12-25      | Sienna Lopez      |\n| 2025-12-25      | Sofia Nakamura    |\n| 2025-12-25      | Tariq Nguyen      |\n| 2025-12-25      | Uma Ali           |\n| 2025-12-25      | Uma Phillips      |\n| 2025-12-25      | Yara Chen         |\n| 2025-12-25      | Yara Rossi        |\n| 2025-12-25      | Yusuf Ali         |\n| 2025-12-25      | Yusuf Hansen      |\n| 2025-12-25      | Yusuf Perez       |\n| 2025-12-25      | Yusuf Rossi       |\n| 2025-12-25      | Zara Khan         |\n\u002b-----------------\u002b-------------------\u002b\nRun Time: real 0.008 user 0.004613 sys 0.002845\nsqlite\u0026gt;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;Phew!\nOk, that looks a mamoth query.\u0026lt;\/p\u0026gt;\n\u0026lt;div class=\u0026#34;sql-playground\u0026#34;\u0026gt;\u0026lt;div class=\u0026#34;controls\u0026#34;\u0026gt;\u0026lt;button class=\u0026#34;run-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-play\u0026#34;\u0026gt;\u0026lt;polygon points=\u0026#34;5 3 19 12 5 21 5 3\u0026#34;\u0026gt;\u0026lt;\/polygon\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;edit-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-edit\u0026#34;\u0026gt;\u0026lt;path d=\u0026#34;M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;path d=\u0026#34;M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;button class=\u0026#34;reset-button\u0026#34;\u0026gt;\u0026lt;svg xmlns=\u0026#34;http:\/\/www.w3.org\/2000\/svg\u0026#34; width=\u0026#34;24\u0026#34; height=\u0026#34;24\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; stroke=\u0026#34;currentColor\u0026#34; stroke-width=\u0026#34;2\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34; class=\u0026#34;feather feather-refresh-cw\u0026#34;\u0026gt;\u0026lt;polyline points=\u0026#34;23 4 23 10 17 10\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;polyline points=\u0026#34;1 20 1 14 7 14\u0026#34;\u0026gt;\u0026lt;\/polyline\u0026gt;\u0026lt;path d=\u0026#34;M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36\u0026#34;\u0026gt;\u0026lt;\/path\u0026gt;\u0026lt;\/svg\u0026gt;\u0026lt;\/button\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-sql\u0026#34;\u0026gt;WITH RECURSIVE dates(gift_date) AS (\n    SELECT \u0026#39;2025-12-15\u0026#39;\n    UNION ALL\n    SELECT date(gift_date, \u0026#39;\u002b1 day\u0026#39;)\n    FROM dates\n    WHERE gift_date \u0026lt; \u0026#39;2025-12-25\u0026#39;\n),\ncombination AS (\n    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date\n    FROM families\n    CROSS JOIN dates\n)\nSELECT\n    combination.gift_date as unassigned_date,\n    family_name\nFROM combination\nLEFT JOIN deliveries_assigned\n    ON deliveries_assigned.family_id = combination.family_id\n    AND deliveries_assigned.gift_date = combination.gift_date\nWHERE deliveries_assigned.family_id IS NULL\nORDER BY unassigned_date, family_name;\n\u0026lt;\/code\u0026gt;\u0026lt;\/pre\u0026gt;\u0026lt;div class=\u0026#34;output\u0026#34;\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;\/div\u0026gt;\u0026lt;p\u0026gt;So, to recap\u0026lt;\/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Generate a table of dates from \u0026lt;code\u0026gt;2025-12-15\u0026lt;\/code\u0026gt; to \u0026lt;code\u0026gt;2025-12-25\u0026lt;\/code\u0026gt; using a recursive CTE.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;Create a table of combinations of \u0026lt;code\u0026gt;families\u0026lt;\/code\u0026gt; and \u0026lt;code\u0026gt;dates\u0026lt;\/code\u0026gt; using a cross join.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;Left join the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table with the combination table.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;Filter out the rows where the \u0026lt;code\u0026gt;family_id\u0026lt;\/code\u0026gt; in the \u0026lt;code\u0026gt;deliveries_assigned\u0026lt;\/code\u0026gt; table is \u0026lt;code\u0026gt;NULL\u0026lt;\/code\u0026gt;.\u0026lt;\/li\u0026gt;\n\u0026lt;li\u0026gt;Order the results by \u0026lt;code\u0026gt;unassigned_date\u0026lt;\/code\u0026gt; and \u0026lt;code\u0026gt;name\u0026lt;\/code\u0026gt;, respectively, both in ascending order.\u0026lt;\/li\u0026gt;\n\u0026lt;\/ul\u0026gt;\n\u0026lt;p\u0026gt;Simple right?\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;That\u0026#39;s it from day 6.\u0026lt;\/p\u0026gt;\n\u0026lt;p\u0026gt;It getting serious out there!\u0026lt;\/p\u0026gt;\n"
    }
    </script>
    
    
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/code-block.css">
    <link rel="stylesheet" href="/post-navigation.css">
    
    <link rel="icon" href="/tbicon.png" type="image/png">
    <link rel="apple-touch-icon" href="/tbicon.png">
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link id="syntax-theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.13.0/sql-wasm.js"></script>
    <link rel="stylesheet" href="/sql-playground.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/monokai.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/sql/sql.min.js"></script>
    <script src="/sql-playground.js"></script>
    
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const body = document.body;
        const stylesheet = document.getElementById("syntax-theme");
        const themeToggle = document.getElementById('theme-toggle');

        function setSyntaxTheme(theme) {
            if (theme === "secondary") {
                stylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css";
            } else {
                stylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css";
            }
        }

        
        document.querySelectorAll("pre code").forEach((block) => {
            hljs.highlightElement(block);
        });

        
        const currentTheme = localStorage.getItem("theme") || "default";
        if (currentTheme === "secondary") {
            body.classList.add("secondary-theme");
            if (themeToggle) themeToggle.checked = true;
        }
        setSyntaxTheme(currentTheme);

        
        if (themeToggle) {
            themeToggle.addEventListener('change', () => {
                const newTheme = themeToggle.checked ? 'secondary' : 'default';
                if (themeToggle.checked) {
                    body.classList.add('secondary-theme');
                } else {
                    body.classList.remove('secondary-theme');
                }
                localStorage.setItem('theme', newTheme);
                setSyntaxTheme(newTheme);
            });
        }
        
        
        const editBtn = document.getElementById('editor-edit');
        if (editBtn) {
            editBtn.addEventListener('click', async function () {
                const slug = "sqlog\/advent-of-sql-2025-day-6";
                const type = "sqlog";
                console.log("Editing post:", slug, type);
                const url = "https:\/\/devmeetgor.netlify.app/.netlify/functions/api?slug=" + slug + "&method=edit&type=" + type;
                
                try {
                    const res = await fetch(url);
                    if (!res.ok) throw new Error("Failed to fetch edit content");
                    const html = await res.text();
                    document.querySelector('.post-content').innerHTML = html;
                } catch (err) {
                    console.error(err);
                    alert("Error loading editor content");
                }
            });
        }
    });
    </script>
    
    
    <script src="/seasonal-effects.js" defer></script>
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EET2ZX4QY1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-EET2ZX4QY1');
    </script>
</head>
<body>
    <header class="header">
  <a class="site-title" href="/" aria-label="Meet Gor - Home">Meet Gor</a>
  <nav>
    <ul>
      <li><a href="/" aria-label="Home">Home</a></li>
      <li><a href="/posts" aria-label="Posts">Posts</a></li>
      <li><a href="/all-content" aria-label="All Content">All Content</a></li>
      <li><a href="/about" aria-label="About">About</a></li>
      <li><a href="/contact" aria-label="Contact">Contact</a></li>
    </ul>
  </nav>
  <div class="theme-switch">
    <input type="checkbox" id="theme-toggle" aria-label="Toggle Theme">
    <label for="theme-toggle"></label>
  </div>
  
</header>
    
    <main class="container">
        <article class="blog-post">
            <h1>Advent of SQL 2025 Day 6: Days of Delight</h1>
            
            <div class="post-meta">
                Published on  <time datetime="2025-12-21 15:30 &#43;0530">2025-12-21 15:30 &#43;0530</time>
            </div>
            
            <div class="post-meta">
                Type: <a href="/sqlog">sqlog</a>
            </div>
            
            <div class="post-meta tags">
                <span class="post-series-label"> Tags:</span>
                
                <a href="/tags/sqlite">#sqlite</a>
                
                <a href="/tags/sql">#sql</a>
                
                <a href="/tags/advent-of-sql">#advent-of-sql</a>
                
            </div>
            
            
            <div class="post-series">
                <span class="series-label">Part of the
                <span class="series-list">
                    
                    <a href="/series/advent-of-sql-2025" class="series-link"> advent-of-sql-2025</a>
                    
                </span></span>
                <span class="series-label">series</span>
            </div>
            
            
            
            
            <hr>
            
            <div class="post-content">
                <h2 id="advent-of-sql-day-6-days-of-delight">Advent of SQL Day 6: Days of Delight</h2>
<p>It is day 6 of advent of SQL.</p>
<p>Let's jump straight into the sql for the day.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">DROP TABLE IF EXISTS families;
DROP TABLE IF EXISTS deliveries_assigned;

CREATE TABLE families (
    id INT PRIMARY KEY,
    family_name TEXT
);

CREATE TABLE deliveries_assigned (
    id INT PRIMARY KEY,
    family_id INT,
    gift_date DATE,
    gift_name TEXT
);

INSERT INTO families (id, family_name) VALUES
    (1, 'Isla Martinez'),
    (2, 'Nolan Garcia'),
    (3, 'Yara Chen'),
    (4, 'Tariq Nguyen'),
    (5, 'Mila Hernandez'),
    (6, 'Casey Kim'),
    (7, 'Mateo Hernandez'),
    (8, 'Keiko Petrov'),
    (9, 'Ethan Flores'),
    (10, 'Mateo Nakamura'),
    (11, 'Maya Fernandez'),
    (12, 'Mila Davis'),
    (13, 'Yara Rossi'),
    (14, 'Nolan Phillips'),
    (15, 'Amina Perez');

INSERT INTO deliveries_assigned (id, family_id, gift_date, gift_name) VALUES
    (1, 1, '2025-12-01', 'roasted cashews'),
    (2, 1, '2025-12-02', 'cookie decorating kit'),
    (3, 1, '2025-12-03', 'dark chocolate assortment'),
    (4, 1, '2025-12-04', 'white chocolate candies'),
    (5, 1, '2025-12-05', 'reindeer headband'),
    (6, 1, '2025-12-06', 'holiday brownie bites'),
    (7, 1, '2025-12-07', 'shortbread cookie tin'),
    (8, 1, '2025-12-08', 'chocolate chip cookies'),
    (9, 1, '2025-12-11', 'holiday jam trio'),
    (10, 1, '2025-12-12', 'white chocolate popcorn'),
    (11, 1, '2025-12-14', 'holiday jam trio'),
    (12, 1, '2025-12-15', 'fudge bites'),
    (13, 1, '2025-12-16', 'holiday sticker sheet'),
    (14, 1, '2025-12-18', 'hot cocoa bombs'),
    (15, 1, '2025-12-19', 'honey roasted nuts'),
    (16, 1, '2025-12-20', 'holiday mug'),
    (17, 1, '2025-12-21', 'white chocolate candies'),
    (18, 1, '2025-12-22', 'puzzle book'),
    (19, 1, '2025-12-23', 'snowman plush'),
    (20, 1, '2025-12-24', 'scented hand cream'),
    (21, 1, '2025-12-25', 'vanilla bean wafers'),
    (22, 2, '2025-12-01', 'roasted cashews'),
    (23, 2, '2025-12-02', 'holiday brownie bites'),
    (24, 2, '2025-12-03', 'peppermint bark bites'),
    (25, 2, '2025-12-04', 'holiday jam trio'),
    (26, 2, '2025-12-05', 'festive notepad'),
    (27, 2, '2025-12-06', 'scented pine sachet'),
    (28, 2, '2025-12-07', 'holiday mug'),
    (29, 2, '2025-12-08', 'shortbread cookie tin'),
    (30, 2, '2025-12-09', 'dark chocolate assortment');

</code></pre><div class="output"></div></div><p>So, we have two tables:</p>
<ol>
<li><code>families</code> table</li>
<li><code>deliveries_assigned</code> table</li>
</ol>
<p>The first table, <code>family</code> just has the id and the name of the family.</p>
<p>The second table, <code>deliveries_assigned</code> has the id, family id, gift date, and gift name.</p>
<p>Let's look at the problem statement.</p>
<h2 id="problem">Problem</h2>
<blockquote>
<p>Generate a report that returns the dates and families that have no delivery assigned after December 14th, using the <code>families</code> and <code>deliveries_assigned</code>.</p>
<p>Each row in the report should be a date and family name that represents the dates in which families don't have a delivery assigned yet.</p>
<p>Label the columns as <code>unassigned_date</code> and <code>name</code>. Order the results by <code>unassigned_date</code> and <code>name</code>, respectively, both in ascending order.</p>
</blockquote>
<p>Ok, so we need to list the deliveries_assigned for each family first, to check what kind of pattern are we looking for.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">SELECT * FROM deliveries_assigned WHERE family_id = 1;
</code></pre><div class="output"></div></div><div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>sqlite> select * from deliveries_assigned where family_id=1;
+----+-----------+------------+---------------------------+
| id | family_id | gift_date  |         gift_name         |
+----+-----------+------------+---------------------------+
| 1  | 1         | 2025-12-01 | roasted cashews           |
| 2  | 1         | 2025-12-02 | cookie decorating kit     |
| 3  | 1         | 2025-12-03 | dark chocolate assortment |
| 4  | 1         | 2025-12-04 | white chocolate candies   |
| 5  | 1         | 2025-12-05 | reindeer headband         |
| 6  | 1         | 2025-12-06 | holiday brownie bites     |
| 7  | 1         | 2025-12-07 | shortbread cookie tin     |
| 8  | 1         | 2025-12-08 | chocolate chip cookies    |
| 9  | 1         | 2025-12-11 | holiday jam trio          |
| 10 | 1         | 2025-12-12 | white chocolate popcorn   |
| 11 | 1         | 2025-12-14 | holiday jam trio          |
| 12 | 1         | 2025-12-15 | fudge bites               |
| 13 | 1         | 2025-12-16 | holiday sticker sheet     |
| 14 | 1         | 2025-12-18 | hot cocoa bombs           |
| 15 | 1         | 2025-12-19 | honey roasted nuts        |
| 16 | 1         | 2025-12-20 | holiday mug               |
| 17 | 1         | 2025-12-21 | white chocolate candies   |
| 18 | 1         | 2025-12-22 | puzzle book               |
| 19 | 1         | 2025-12-23 | snowman plush             |
| 20 | 1         | 2025-12-24 | scented hand cream        |
| 21 | 1         | 2025-12-25 | vanilla bean wafers       |
+----+-----------+------------+---------------------------+
sqlite>
</code></pre></div><p>So, we are missing gifts for family id <code>1</code> on <code>09</code>, <code>10</code>, <code>13</code>, and <code>17</code>. But we are only asked for gifts after <code>14</code> (December 14th).</p>
<blockquote>
<p>Generate a report that returns the dates and families that have <strong>no delivery assigned after December 14th</strong>, using the families and deliveries_assigned.</p>
</blockquote>
<p>So, we can discard <code>09</code>, <code>10</code>, and <code>13</code> as they are before December 14th.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">SELECT * FROM deliveries_assigned WHERE family_id = 1 AND gift_date > '2025-12-14';
</code></pre><div class="output"></div></div><p>It gives the right dates where the gifts are assigned after December 14th. But the problem is we need to get dates which are missing in this <code>deliveries_assigned</code> table record for each family.</p>
<p>Finding something missing is kind of wired, because you don't have what is missing. Especially for dates, like dates are very painful.</p>
<p>We need to find among the sequential order of the dates, when some of the dates are missing, that is simple here, but you can see it could be quite cubersome if we have to manually add each date in the list for comparing with.</p>
<h3 id="joins-with-not-exists">JOINs with NOT EXISTS</h3>
<p>So, the basic dirty solution is to check the missing dates for each family, one by one.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">SELECT 
    families.family_name AS name,
    dates.column1 AS unassigned_date
FROM families
JOIN (
    VALUES 
        ('2025-12-15'), ('2025-12-16'), ('2025-12-17'),
        ('2025-12-18'), ('2025-12-19'), ('2025-12-20'),
        ('2025-12-21'), ('2025-12-22'), ('2025-12-23'),
        ('2025-12-24'), ('2025-12-25')
) AS dates ON 1=1
WHERE NOT EXISTS (
    SELECT 1 
    FROM deliveries_assigned
    WHERE deliveries_assigned.family_id = families.id 
    AND deliveries_assigned.gift_date = dates.column1
)
ORDER BY unassigned_date, name;
</code></pre><div class="output"></div></div><p>Let's break it down:</p>
<ol>
<li>We have a <code>families</code> table with id and family name.</li>
<li>We have a <code>deliveries_assigned</code> table with id, family id, gift date, and gift name.</li>
<li>We create a list of dates from <code>2025-12-15</code> to <code>2025-12-25</code> using the <code>VALUES</code> keyword.
<ul>
<li>This just appends one date after other and names the columns as <code>column1</code> with the table as <code>dates</code>.</li>
<li>The <code>ON</code> condition is <code>1=1</code> to make sure the <code>WHERE</code> condition is true for the JOIN to happen.</li>
</ul>
</li>
<li>We use the <code>NOT EXISTS</code> keyword to check if the <code>deliveries_assigned</code> table has a record for each date in the list.
<ul>
<li>we use <code>NOT EXISTS</code> because we want to check if there is no date for each date in the assigned list.</li>
</ul>
</li>
<li>We order the results by <code>unassigned_date</code> and <code>name</code>, respectively, both in ascending order.</li>
</ol>
<p>So, that is not the best way to solve this, I think.</p>
<h3 id="recursive-ctes">Recursive CTEs</h3>
<p>We can generate a table full of dates, and then cross join the table with the <code>families</code> table. This will give us all possible combinations of dates and families like the gift should ideally be there for each family from 1st to 25th of December(however we are only interested from 15th to 25th December). Then once we have that full table of combination, we can check from the <code>deliveries_assigned</code> table and inner join for each family and filter out the rows which have family_id as <code>NULL</code> because some dates will be missing for that family.</p>
<p>First we'll create a recursive table of dates from <code>2025-12-15</code> to <code>2025-12-25</code></p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
)
SELECT * FROM dates;
</code></pre><div class="output"></div></div><p>This will give us the dates from <code>2025-12-15</code> to <code>2025-12-25</code> in a recursive table.</p>
<p>What is a recursive table?</p>
<blockquote>
<p>A recursive table is a table that is defined as a combination of itself.</p>
</blockquote>
<p>So, we can create a recursive table of dates from <code>2025-12-15</code> to <code>2025-12-25</code>, The base case is <code>2025-12-15</code>, and the recursive case is <code>SELECT date(gift_date, '+1 day') FROM dates WHERE gift_date &lt; '2025-12-25'</code> which means it will call it recursively for <code>2025-12-16</code> on the first call inside it because of <code>+1 day</code> as the interval in the <code>date</code> function.</p>
<p>The date function is a <a href="https://sqlite.org/lang_datefunc.html#modifiers">function</a> which takes in a date and we can add modifiers to it to manipulate or extract parts of the date. Here we have added the modifier as <code>+1 day</code> which will increment the day by one. We then call that in the <code>dates</code> CTE again till we have the <code>date</code> as less then <code>2025-12-25</code>. Till then we will have created all the <code>dates</code> from <code>15</code> till <code>25</code> including <code>25</code>. We can just type in the values manually as we did in the first dirty solution, but I wanted to see how we can generate dates dynamically in sqlite.</p>
<div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>sqlite> WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
)
SELECT * FROM dates;
+------------+
| gift_date  |
+------------+
| 2025-12-15 |
| 2025-12-16 |
| 2025-12-17 |
| 2025-12-18 |
| 2025-12-19 |
| 2025-12-20 |
| 2025-12-21 |
| 2025-12-22 |
| 2025-12-23 |
| 2025-12-24 |
| 2025-12-25 |
+------------+
Run Time: real 0.000 user 0.000225 sys 0.000009
sqlite>
</code></pre></div><p>Now we'll cross join the <code>families</code> table with the <code>dates</code> table.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
FROM families
CROSS JOIN dates;
</code></pre><div class="output"></div></div><p>OK! Wait include the <code>dates</code> CTE above too, was just simplifying the query.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
)
SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
FROM families
CROSS JOIN dates;
</code></pre><div class="output"></div></div><p>This will give us the full table of combination of dates and families.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">SELECT COUNT(*) FROM families;
</code></pre><div class="output"></div></div><div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">sqlite> SELECT COUNT(*) FROM families;
+----------+
| COUNT(*) |
+----------+
| 250      |
+----------+
Run Time: real 0.000 user 0.000113 sys 0.000006
sqlite>
</code></pre><div class="output"></div></div><p>That is :</p>
<ul>
<li>There are 11 dates right? <code>2025-12-15</code> to <code>2025-12-25</code>, -&gt; <code>15</code> (1), <code>16</code> (2), <code>17</code> (3), <code>18</code> (4), <code>19</code> (5), <code>20</code> (6), <code>21</code> (7), <code>22</code> (8), <code>23</code> (9), <code>24</code> (10), <code>25</code> (11)</li>
<li>There are I think <code>250</code> families.</li>
<li>So, a <code>CROSS JOIN</code> will give us <code>11 * 250 = 2750</code> rows.</li>
</ul>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">SELECT COUNT(*) FROM (WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
)
SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
FROM families
CROSS JOIN dates) as count;
</code></pre><div class="output"></div></div><p>11 dates for each family.</p>
<div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>sqlite> SELECT COUNT(*) FROM (WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
)
SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
FROM families
CROSS JOIN dates) as count;
+----------+
| COUNT(*) |
+----------+
| 2750     |
+----------+
Run Time: real 0.001 user 0.000407 sys 0.000000
sqlite>
</code></pre></div><p>Now, we simply have to join the <code>deliveries_assigned</code> table with the above table.</p>
<p>Why?
Because we need to map which dates are assigned and which dates are missing.</p>
<p>We need to do a which join?</p>
<p>LEFT, RIGHT or INNER</p>
<p>LEFT</p>
<p>WHy?</p>
<p>Because, the left table will have all the dates, and the right table will have the assigned dates. <strong>We need all the records from the <code>left</code> table (the combination, cross join table)</strong></p>
<p>We need all the rows in the <code>left</code> or the combination(cross join) of date and family table as to map which dates are assigned and which dates are missing.</p>
<p>If the <code>left</code> table has a record, then it means the date is assigned. If the <code>right</code> table has a record i.e. the gift is assigned, then it means the date is not assigned.</p>
<p>Hence, we can simply then filter out the relations with <code>NULL</code> as the <code>family_id</code> in the <code>deliveries_assigned</code> table.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
),
combination AS (
    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
    FROM families
    CROSS JOIN dates
)
SELECT
    *
FROM combination
LEFT JOIN deliveries_assigned
    ON deliveries_assigned.family_id = combination.family_id
    AND deliveries_assigned.gift_date = combination.gift_date
</code></pre><div class="output"></div></div><div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>sqlite> WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
),
combination AS (
    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
    FROM families
    CROSS JOIN dates
)
SELECT
    *
FROM combination
LEFT JOIN deliveries_assigned
    ON deliveries_assigned.family_id = combination.family_id
    AND deliveries_assigned.gift_date = combination.gift_date LIMIT 30;
+-----------+---------------+------------+----+-----------+------------+-------------------------+
| family_id |  family_name  | gift_date  | id | family_id | gift_date  |        gift_name        |
+-----------+---------------+------------+----+-----------+------------+-------------------------+
| 1         | Isla Martinez | 2025-12-15 | 12 | 1         | 2025-12-15 | fudge bites             |
| 1         | Isla Martinez | 2025-12-16 | 13 | 1         | 2025-12-16 | holiday sticker sheet   |
| 1         | Isla Martinez | 2025-12-17 |    |           |            |                         |
| 1         | Isla Martinez | 2025-12-18 | 14 | 1         | 2025-12-18 | hot cocoa bombs         |
| 1         | Isla Martinez | 2025-12-19 | 15 | 1         | 2025-12-19 | honey roasted nuts      |
| 1         | Isla Martinez | 2025-12-20 | 16 | 1         | 2025-12-20 | holiday mug             |
| 1         | Isla Martinez | 2025-12-21 | 17 | 1         | 2025-12-21 | white chocolate candies |
| 1         | Isla Martinez | 2025-12-22 | 18 | 1         | 2025-12-22 | puzzle book             |
| 1         | Isla Martinez | 2025-12-23 | 19 | 1         | 2025-12-23 | snowman plush           |
| 1         | Isla Martinez | 2025-12-24 | 20 | 1         | 2025-12-24 | scented hand cream      |
| 1         | Isla Martinez | 2025-12-25 | 21 | 1         | 2025-12-25 | vanilla bean wafers     |
| 2         | Nolan Garcia  | 2025-12-15 | 36 | 2         | 2025-12-15 | mini marshmallow tubes  |
| 2         | Nolan Garcia  | 2025-12-16 | 37 | 2         | 2025-12-16 | white chocolate candies |
| 2         | Nolan Garcia  | 2025-12-17 | 38 | 2         | 2025-12-17 | gingerbread cookie kit  |
| 2         | Nolan Garcia  | 2025-12-18 | 39 | 2         | 2025-12-18 | family card game        |
| 2         | Nolan Garcia  | 2025-12-19 |    |           |            |                         |
| 2         | Nolan Garcia  | 2025-12-20 | 40 | 2         | 2025-12-20 | santa hat               |
| 2         | Nolan Garcia  | 2025-12-21 | 41 | 2         | 2025-12-21 | holiday sticker sheet   |
| 2         | Nolan Garcia  | 2025-12-22 |    |           |            |                         |
| 2         | Nolan Garcia  | 2025-12-23 | 42 | 2         | 2025-12-23 | pecan praline bites     |
| 2         | Nolan Garcia  | 2025-12-24 |    |           |            |                         |
| 2         | Nolan Garcia  | 2025-12-25 | 43 | 2         | 2025-12-25 | santa hat               |
| 3         | Yara Chen     | 2025-12-15 | 57 | 3         | 2025-12-15 | peppermint bark bites   |
| 3         | Yara Chen     | 2025-12-16 |    |           |            |                         |
| 3         | Yara Chen     | 2025-12-17 |    |           |            |                         |
| 3         | Yara Chen     | 2025-12-18 | 58 | 3         | 2025-12-18 | cheddar popcorn         |
| 3         | Yara Chen     | 2025-12-19 |    |           |            |                         |
| 3         | Yara Chen     | 2025-12-20 | 59 | 3         | 2025-12-20 | festive notepad         |
| 3         | Yara Chen     | 2025-12-21 | 60 | 3         | 2025-12-21 | fruit assortment        |
| 3         | Yara Chen     | 2025-12-22 |    |           |            |                         |
+-----------+---------------+------------+----+-----------+------------+-------------------------+
...
...
| 249       | Jude Bautista     | 2025-12-24 |      |           |            |                            |
| 249       | Jude Bautista     | 2025-12-25 | 5073 | 249       | 2025-12-25 | almond brittle             |
| 250       | Bianca Muller     | 2025-12-15 | 5086 | 250       | 2025-12-15 | cocoa mix bundle           |
| 250       | Bianca Muller     | 2025-12-16 | 5087 | 250       | 2025-12-16 | cookie decorating kit      |
| 250       | Bianca Muller     | 2025-12-17 | 5088 | 250       | 2025-12-17 | shortbread cookie tin      |
| 250       | Bianca Muller     | 2025-12-18 |      |           |            |                            |
| 250       | Bianca Muller     | 2025-12-19 | 5089 | 250       | 2025-12-19 | snowflake candle           |
| 250       | Bianca Muller     | 2025-12-20 |      |           |            |                            |
| 250       | Bianca Muller     | 2025-12-21 | 5090 | 250       | 2025-12-21 | trail mix trio             |
| 250       | Bianca Muller     | 2025-12-22 | 5091 | 250       | 2025-12-22 | shortbread cookie tin      |
| 250       | Bianca Muller     | 2025-12-23 |      |           |            |                            |
| 250       | Bianca Muller     | 2025-12-24 |      |           |            |                            |
| 250       | Bianca Muller     | 2025-12-25 | 5092 | 250       | 2025-12-25 | gingerbread cookie kit     |
+-----------+-------------------+------------+------+-----------+------------+----------------------------+
Run Time: real 0.028 user 0.013392 sys 0.013096
sqlite>
</code></pre></div><p>This will give all the gifts that have been assigned as well as not assigned for each family on each date from <code>2025-12-15</code> to <code>2025-12-25</code>.</p>
<p>Now, you can see, what we need and what we don't we simply can get the gifts or records with the <code>family_id</code> in the <code>deliveries_assigned</code> table as <code>NULL</code>, since there was no record for the family_id in the <code>deliveries_assigned</code> table for that date.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
),
combination AS (
    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
    FROM families
    CROSS JOIN dates
)
SELECT
    *
FROM combination
LEFT JOIN deliveries_assigned
    ON deliveries_assigned.family_id = combination.family_id
    AND deliveries_assigned.gift_date = combination.gift_date
WHERE deliveries_assigned.family_id IS NULL
</code></pre><div class="output"></div></div><p>So, a simple <code>WHERE</code> clause with deliveries_assigned.family_id <code>IS NULL</code> will give us the missing dates for each family.</p>
<div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>sqlite> WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
),
combination AS (
    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
    FROM families
    CROSS JOIN dates
)
SELECT
    *
FROM combination
LEFT JOIN deliveries_assigned
    ON deliveries_assigned.family_id = combination.family_id
    AND deliveries_assigned.gift_date = combination.gift_date
WHERE deliveries_assigned.family_id IS NULL
   ...> ;
+-----------+-------------------+------------+----+-----------+-----------+-----------+
| family_id |    family_name    | gift_date  | id | family_id | gift_date | gift_name |
+-----------+-------------------+------------+----+-----------+-----------+-----------+
| 1         | Isla Martinez     | 2025-12-17 |    |           |           |           |
| 2         | Nolan Garcia      | 2025-12-19 |    |           |           |           |
| 2         | Nolan Garcia      | 2025-12-22 |    |           |           |           |
| 2         | Nolan Garcia      | 2025-12-24 |    |           |           |           |
| 3         | Yara Chen         | 2025-12-16 |    |           |           |           |
| 3         | Yara Chen         | 2025-12-17 |    |           |           |           |
| 3         | Yara Chen         | 2025-12-19 |    |           |           |           |
| 3         | Yara Chen         | 2025-12-22 |    |           |           |           |
| 4         | Tariq Nguyen      | 2025-12-16 |    |           |           |           |
...
...
| 247       | Malik Kim         | 2025-12-18 |    |           |           |           |
| 247       | Malik Kim         | 2025-12-20 |    |           |           |           |
| 247       | Malik Kim         | 2025-12-21 |    |           |           |           |
| 248       | Tariq Flores      | 2025-12-16 |    |           |           |           |
| 248       | Tariq Flores      | 2025-12-17 |    |           |           |           |
| 248       | Tariq Flores      | 2025-12-18 |    |           |           |           |
| 249       | Jude Bautista     | 2025-12-16 |    |           |           |           |
| 249       | Jude Bautista     | 2025-12-20 |    |           |           |           |
| 249       | Jude Bautista     | 2025-12-21 |    |           |           |           |
| 249       | Jude Bautista     | 2025-12-23 |    |           |           |           |
| 249       | Jude Bautista     | 2025-12-24 |    |           |           |           |
| 250       | Bianca Muller     | 2025-12-18 |    |           |           |           |
| 250       | Bianca Muller     | 2025-12-20 |    |           |           |           |
| 250       | Bianca Muller     | 2025-12-23 |    |           |           |           |
| 250       | Bianca Muller     | 2025-12-24 |    |           |           |           |
+-----------+-------------------+------------+----+-----------+-----------+-----------+
Run Time: real 0.014 user 0.011508 sys 0.002046
sqlite>
</code></pre></div><p>All right, we now need to order by <code>unassigned_date</code> and <code>name</code> which are the <code>dates</code> from the <code>combination</code> table and the <code>family_name</code> from the <code>families</code> table.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
),
combination AS (
    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
    FROM families
    CROSS JOIN dates
)
SELECT
    combination.gift_date as unassigned_date,
    family_name
FROM combination
LEFT JOIN deliveries_assigned
    ON deliveries_assigned.family_id = combination.family_id
    AND deliveries_assigned.gift_date = combination.gift_date
WHERE deliveries_assigned.family_id IS NULL
ORDER BY unassigned_date, family_name;
</code></pre><div class="output"></div></div><div class="code-block"><div class="code-header"><span class="language-name"></span><button class="copy-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div><pre><code>+-----------------+-------------------+
| unassigned_date |    family_name    |
+-----------------+-------------------+
| 2025-12-15      | Adil Rossi        |
| 2025-12-15      | Aisha Connor      |
| 2025-12-15      | Amina Perez       |
| 2025-12-15      | Amina Wong        |
| 2025-12-15      | Andre Flores      |
| 2025-12-15      | Anya Singh        |
| 2025-12-15      | Arjun Wong        |
| 2025-12-15      | Bianca Connor     |
| 2025-12-15      | Caleb Petrov      |
| 2025-12-15      | Caleb Roberts     |
| 2025-12-15      | Carmen Carter     |
| 2025-12-15      | Carmen Garcia     |
| 2025-12-15      | Casey Flores      |
| 2025-12-15      | Chi Hughes        |
| 2025-12-15      | Clara Johnson     |
| 2025-12-15      | Dara Bautista     |
| 2025-12-15      | David Ramirez     |
| 2025-12-15      | Elias Petrov      |
| 2025-12-15      | Elias Petrov      |
| 2025-12-15      | Ethan Flores      |
| 2025-12-15      | Eva Gonzalez      |
...
...
| 2025-12-25      | Owen Park         |
| 2025-12-25      | Priya Khan        |
| 2025-12-25      | Rafael Singh      |
| 2025-12-25      | Ravi Abdallah     |
| 2025-12-25      | Ravi Mitchell     |
| 2025-12-25      | Rosa Turner       |
| 2025-12-25      | Sara Jensen       |
| 2025-12-25      | Sara Lopez        |
| 2025-12-25      | Sara Rossi        |
| 2025-12-25      | Sarah Phillips    |
| 2025-12-25      | Seth Garcia       |
| 2025-12-25      | Sienna Lopez      |
| 2025-12-25      | Sofia Nakamura    |
| 2025-12-25      | Tariq Nguyen      |
| 2025-12-25      | Uma Ali           |
| 2025-12-25      | Uma Phillips      |
| 2025-12-25      | Yara Chen         |
| 2025-12-25      | Yara Rossi        |
| 2025-12-25      | Yusuf Ali         |
| 2025-12-25      | Yusuf Hansen      |
| 2025-12-25      | Yusuf Perez       |
| 2025-12-25      | Yusuf Rossi       |
| 2025-12-25      | Zara Khan         |
+-----------------+-------------------+
Run Time: real 0.008 user 0.004613 sys 0.002845
sqlite>
</code></pre></div><p>Phew!
Ok, that looks a mamoth query.</p>
<div class="sql-playground"><div class="controls"><button class="run-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button><button class="edit-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button><button class="reset-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg></button></div><pre><code class="language-sql">WITH RECURSIVE dates(gift_date) AS (
    SELECT '2025-12-15'
    UNION ALL
    SELECT date(gift_date, '+1 day')
    FROM dates
    WHERE gift_date < '2025-12-25'
),
combination AS (
    SELECT families.id AS family_id, families.family_name as family_name, dates.gift_date as gift_date
    FROM families
    CROSS JOIN dates
)
SELECT
    combination.gift_date as unassigned_date,
    family_name
FROM combination
LEFT JOIN deliveries_assigned
    ON deliveries_assigned.family_id = combination.family_id
    AND deliveries_assigned.gift_date = combination.gift_date
WHERE deliveries_assigned.family_id IS NULL
ORDER BY unassigned_date, family_name;
</code></pre><div class="output"></div></div><p>So, to recap</p>
<ul>
<li>Generate a table of dates from <code>2025-12-15</code> to <code>2025-12-25</code> using a recursive CTE.</li>
<li>Create a table of combinations of <code>families</code> and <code>dates</code> using a cross join.</li>
<li>Left join the <code>deliveries_assigned</code> table with the combination table.</li>
<li>Filter out the rows where the <code>family_id</code> in the <code>deliveries_assigned</code> table is <code>NULL</code>.</li>
<li>Order the results by <code>unassigned_date</code> and <code>name</code>, respectively, both in ascending order.</li>
</ul>
<p>Simple right?</p>
<p>That's it from day 6.</p>
<p>It getting serious out there!</p>

            </div>
        </article>
        
        
        

<nav class="post-navigation" aria-label="Post Navigation">
    <div class="nav-container">
        
        
        <a href="/sqlog/advent-of-sql-2025-day-5" class="nav-link nav-prev" title="Previous Post">
            <span class="nav-arrow"></span>
            <span class="nav-label">Previous</span>
            <span class="nav-title">Advent of SQL 2025 Day 5: EchoTrack Wrapped</span>
        </a>
        

        
        
        <a href="/sqlog/advent-of-sql-2025-day-7" class="nav-link nav-next" title="Next Post">
            <span class="nav-label">Next</span>
            <span class="nav-title">Advent of SQL 2025 Day 7: Polar Express Mixin</span>
            <span class="nav-arrow"></span>
        </a>
        
    </div>
</nav>


        
        
        


<aside class="related-reading" aria-labelledby="related-reading-title">
    <h3 id="related-reading-title" class="related-title"> Related Reading</h3>
    <ul class="related-list">
        
        
        <li class="related-item">
            <a href="/sqlog/advent-of-sql-2025-day-15" class="related-link">
                <span class="related-post-title">Advent of SQL 2025 Day 15: Confirmation Phrase Dispatches</span>
                <span class="related-post-date">2025-12-28 20:30 &#43;0530</span>
            </a>
        </li>
        
        
        
        <li class="related-item">
            <a href="/sqlog/advent-of-sql-2025-day-14" class="related-link">
                <span class="related-post-title">Advent of SQL 2025 Day 14: Ski Resort Paths</span>
                <span class="related-post-date">2025-12-28 15:30 &#43;0530</span>
            </a>
        </li>
        
        
        
        <li class="related-item">
            <a href="/sqlog/advent-of-sql-2025-day-13" class="related-link">
                <span class="related-post-title">Advent of SQL 2025 Day 13: XML Travel Manifests</span>
                <span class="related-post-date">2025-12-27 20:30 &#43;0530</span>
            </a>
        </li>
        
        
        
        <li class="related-item">
            <a href="/sqlog/advent-of-sql-2025-day-12" class="related-link">
                <span class="related-post-title">Advent of SQL 2025 Day 12: Archive Flight Records</span>
                <span class="related-post-date">2025-12-27 15:30 &#43;0530</span>
            </a>
        </li>
        
        
        
        <li class="related-item">
            <a href="/sqlog/advent-of-sql-2025-day-11" class="related-link">
                <span class="related-post-title">Advent of SQL 2025 Day 11: Behavior Score</span>
                <span class="related-post-date">2025-12-26 15:30 &#43;0530</span>
            </a>
        </li>
        
        
    </ul>
</aside>


    </main>
    
    <div id="comments">
        <script src="https://giscus.app/client.js"
            data-repo="Mr-Destructive/meetgor.com"
            data-repo-id="R_kgDOHZ6V_g"
            data-category="Q&A"
            data-category-id="DIC_kwDOHZ6V_s4CRfn4"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="dark_high_contrast"
            data-lang="en"
            crossorigin="anonymous"
            async>
        </script>
    </div>
    
    <footer class="site-footer" role="contentinfo">
  <div class="footer-content">
    <p>&copy; Meet Gor. All rights reserved.</p>
    <div class="social-links">
      <a href="/contact" aria-label="Connect with me">Connect with me</a>
    </div>
  </div>
</footer>
    
</body>
</html>
